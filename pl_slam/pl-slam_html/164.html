<html><head><title>CPose3D.h</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<link rel="stylesheet" type="text/css" href="sourcestyles.css" />
</head><body link="blue" vlink="blue">
<h3>File: /media/zhijian/Document/grow/slam/PL_SLAM/pl_slam/include/mrpt/poses/CPose3D.h</h3>
<SCRIPT>
defaultStatus = "File: /media/zhijian/Document/grow/slam/PL_SLAM/pl_slam/include/mrpt/poses/CPose3D.h";
top.document.title  = "CPose3D.h";
</SCRIPT>
<pre><span class="default"></span><a name="1"><font size=-1>1     </font></a><span class="default"></span><span class="comment">/* +---------------------------------------------------------------------------+</span>
<a name="2"><font size=-1>2     </font></a><span class="comment">   |                     Mobile Robot Programming Toolkit (MRPT)               |</span>
<a name="3"><font size=-1>3     </font></a><span class="comment">   |                          http://www.mrpt.org/                             |</span>
<a name="4"><font size=-1>4     </font></a><span class="comment">   |                                                                           |</span>
<a name="5"><font size=-1>5     </font></a><span class="comment">   | Copyright (c) 2005-2016, Individual contributors, see AUTHORS file        |</span>
<a name="6"><font size=-1>6     </font></a><span class="comment">   | See: http://www.mrpt.org/Authors - All rights reserved.                   |</span>
<a name="7"><font size=-1>7     </font></a><span class="comment">   | Released under BSD License. See details in http://www.mrpt.org/License    |</span>
<a name="8"><font size=-1>8     </font></a><span class="comment">   +---------------------------------------------------------------------------+ */</span>
<a name="9"><font size=-1>9     </font></a><span class="comment"></span><span class="preproc">#ifndef <a href="dictionary_C.html#6948">CPOSE3D_H</a></span>
<a name="10"><font size=-1>10     </font></a><span class="preproc">#define <a href="dictionary_C.html#6948">CPOSE3D_H</a></span>
<a name="11"><font size=-1>11     </font></a><span class="preproc"></span>
<a name="12"><font size=-1>12     </font></a><span class="preproc">#include </span><span class="string">&lt;mrpt/poses/CPose.h&gt;</span>
<a name="13"><font size=-1>13     </font></a><span class="string"></span><span class="preproc">#include </span><span class="string">&lt;mrpt/math/CMatrixFixedNumeric.h&gt;</span>
<a name="14"><font size=-1>14     </font></a><span class="string"></span><span class="preproc">#include </span><span class="string">&lt;mrpt/math/CQuaternion.h&gt;</span>
<a name="15"><font size=-1>15     </font></a><span class="string"></span>
<a name="16"><font size=-1>16     </font></a><span class="string"></span><span class="comment">// Add for declaration of mexplus::from template specialization</span>
<a name="17"><font size=-1>17     </font></a><span class="comment"><a href="dictionary_D.html#6949">DECLARE_MEXPLUS_FROM</a></span><span class="default">( mrpt::poses::CPose3D )</span>
<a name="18"><font size=-1>18     </font></a><span class="default"></span>
<a name="19"><font size=-1>19     </font></a><span class="default"></span><span class="keyword">namespace </span><span class="default">mrpt</span>
<a name="20"><font size=-1>20     </font></a><span class="default">{</span>
<a name="21"><font size=-1>21     </font></a><span class="default"></span><span class="keyword">namespace </span><span class="default">poses</span>
<a name="22"><font size=-1>22     </font></a><span class="default">{</span>
<a name="23"><font size=-1>23     </font></a><span class="default">	</span><span class="keyword">class <a href="dictionary_M.html#612">CPose3DQuat</a></span><span class="default">;</span>
<a name="24"><font size=-1>24     </font></a><span class="default">	</span><span class="keyword">class <a href="dictionary_M.html#513">CPose3DRotVec</a></span><span class="default">;</span>
<a name="25"><font size=-1>25     </font></a><span class="default"></span>
<a name="26"><font size=-1>26     </font></a><span class="default">	<a href="dictionary_D.html#518">DEFINE_SERIALIZABLE_PRE</a>( <a href="dictionary_M.html#182">CPose3D</a> )</span>
<a name="27"><font size=-1>27     </font></a><span class="default"></span>
<a name="28"><font size=-1>28     </font></a><span class="default">	</span><span class="comment">/** A class used to store a 3D pose (a 3D translation + a rotation in 3D).</span>
<a name="29"><font size=-1>29     </font></a><span class="comment">	 *   The 6D transformation in SE(3) stored in this class is kept in two</span>
<a name="30"><font size=-1>30     </font></a><span class="comment">	 *   separate containers: a 3-array for the translation, and a 3x3 rotation matrix.</span>
<a name="31"><font size=-1>31     </font></a><span class="comment">	 *</span>
<a name="32"><font size=-1>32     </font></a><span class="comment">	 *  This class allows parameterizing 6D poses as a 6-vector: [x y z yaw pitch roll] (read below</span>
<a name="33"><font size=-1>33     </font></a><span class="comment">	 *   for the angles convention). Note however,</span>
<a name="34"><font size=-1>34     </font></a><span class="comment">	 *   that the yaw/pitch/roll angles are only computed (on-demand and transparently)</span>
<a name="35"><font size=-1>35     </font></a><span class="comment">	 *   when the user requests them. Normally, rotations and transformations are always handled</span>
<a name="36"><font size=-1>36     </font></a><span class="comment">	 *   via the 3x3 rotation matrix.</span>
<a name="37"><font size=-1>37     </font></a><span class="comment">	 *</span>
<a name="38"><font size=-1>38     </font></a><span class="comment">	 *  Yaw/Pitch/Roll angles are defined as successive rotations around *local* (dynamic) axes in the Z/Y/X order:</span>
<a name="39"><font size=-1>39     </font></a><span class="comment">	 *</span>
<a name="40"><font size=-1>40     </font></a><span class="comment">	 *  &lt;div align=center&gt;</span>
<a name="41"><font size=-1>41     </font></a><span class="comment">	 *   &lt;img src=&quot;CPose3D.gif&quot;&gt;</span>
<a name="42"><font size=-1>42     </font></a><span class="comment">	 *  &lt;/div&gt;</span>
<a name="43"><font size=-1>43     </font></a><span class="comment">	 *</span>
<a name="44"><font size=-1>44     </font></a><span class="comment">	 * It may be extremely confusing and annoying to find a different criterion also involving</span>
<a name="45"><font size=-1>45     </font></a><span class="comment">	 * the names &quot;yaw, pitch, roll&quot; but regarding rotations around *global* (static) axes.</span>
<a name="46"><font size=-1>46     </font></a><span class="comment">	 * Fortunately, it's very easy to see (by writing down the product of the three</span>
<a name="47"><font size=-1>47     </font></a><span class="comment">	 * rotation matrices) that both conventions lead to exactly the same numbers.</span>
<a name="48"><font size=-1>48     </font></a><span class="comment">	 * Only, that it's conventional to write the numbers in reverse order.</span>
<a name="49"><font size=-1>49     </font></a><span class="comment">	 * That is, the same rotation can be described equivalently with any of these two</span>
<a name="50"><font size=-1>50     </font></a><span class="comment">	 * parameterizations:</span>
<a name="51"><font size=-1>51     </font></a><span class="comment">	 *</span>
<a name="52"><font size=-1>52     </font></a><span class="comment"> 	 * - In local axes Z/Y/X convention: [yaw pitch roll]   (This is the convention used in mrpt::poses::CPose3D)</span>
<a name="53"><font size=-1>53     </font></a><span class="comment"> 	 * - In global axes X/Y/Z convention: [roll pitch yaw] (One of the Euler angles conventions)</span>
<a name="54"><font size=-1>54     </font></a><span class="comment">	 *</span>
<a name="55"><font size=-1>55     </font></a><span class="comment">	 * For further descriptions of point &amp; pose classes, see mrpt::poses::CPoseOrPoint or refer</span>
<a name="56"><font size=-1>56     </font></a><span class="comment">	 * to the [2D/3D Geometry tutorial](http://www.mrpt.org/2D_3D_Geometry) online.</span>
<a name="57"><font size=-1>57     </font></a><span class="comment">	 *</span>
<a name="58"><font size=-1>58     </font></a><span class="comment">	 * To change the individual components of the pose, use CPose3D::setFromValues. This class assures that the internal</span>
<a name="59"><font size=-1>59     </font></a><span class="comment">	 * 3x3 rotation matrix is always up-to-date with the &quot;yaw pitch roll&quot; members.</span>
<a name="60"><font size=-1>60     </font></a><span class="comment">	 *</span>
<a name="61"><font size=-1>61     </font></a><span class="comment">	 * Rotations in 3D can be also represented by quaternions. See mrpt::math::CQuaternion, and method CPose3D::getAsQuaternion.</span>
<a name="62"><font size=-1>62     </font></a><span class="comment">	 *</span>
<a name="63"><font size=-1>63     </font></a><span class="comment">	 * This class and CPose3DQuat are very similar, and they can be converted to the each other automatically via transformation constructors.</span>
<a name="64"><font size=-1>64     </font></a><span class="comment">	 *</span>
<a name="65"><font size=-1>65     </font></a><span class="comment">	 * There are Lie algebra methods: \a exp and \a ln (see the methods for documentation).</span>
<a name="66"><font size=-1>66     </font></a><span class="comment">	 *</span>
<a name="67"><font size=-1>67     </font></a><span class="comment">	 * \note Read also: &quot;A tutorial on SE(3) transformation parameterizations and on-manifold optimization&quot;, (Technical report), 2010-2014. [PDF](http://ingmec.ual.es/~jlblanco/papers/jlblanco2010geometry3D_techrep.pdf)</span>
<a name="68"><font size=-1>68     </font></a><span class="comment">	 *</span>
<a name="69"><font size=-1>69     </font></a><span class="comment">	 * \ingroup poses_grp</span>
<a name="70"><font size=-1>70     </font></a><span class="comment">	 * \sa CPoseOrPoint,CPoint3D, mrpt::math::CQuaternion</span>
<a name="71"><font size=-1>71     </font></a><span class="comment">	 */</span>
<a name="72"><font size=-1>72     </font></a><span class="comment">	</span><span class="keyword">class <a href="dictionary_B.html#113">BASE_IMPEXP</a> <a href="dictionary_M.html#182">CPose3D</a> </span><span class="default">: </span><span class="keyword">public <a href="dictionary_M.html#519">CPose</a></span><span class="default">&lt;CPose3D&gt;, </span><span class="keyword">public </span><span class="default">mrpt::utils::<a href="dictionary_M.html#520">CSerializable</a></span>
<a name="73"><font size=-1>73     </font></a><span class="default">	{</span>
<a name="74"><font size=-1>74     </font></a><span class="default">		</span><span class="comment">// This must be added to any CSerializable derived class:</span>
<a name="75"><font size=-1>75     </font></a><span class="comment">		<a href="dictionary_D.html#561">DEFINE_SERIALIZABLE</a></span><span class="default">( <a href="dictionary_M.html#182">CPose3D</a> )</span>
<a name="76"><font size=-1>76     </font></a><span class="default"></span>
<a name="77"><font size=-1>77     </font></a><span class="default">        </span><span class="comment">// This must be added for declaration of MEX-related functions</span>
<a name="78"><font size=-1>78     </font></a><span class="comment">        <a href="dictionary_D.html#6983">DECLARE_MEX_CONVERSION</a></span>
<a name="79"><font size=-1>79     </font></a><span class="comment"></span>
<a name="80"><font size=-1>80     </font></a><span class="comment">	</span><span class="keyword">public</span><span class="default">:</span>
<a name="81"><font size=-1>81     </font></a><span class="default">		mrpt::math::<a href="dictionary_M.html#563">CArrayDouble</a>&lt;</span><span class="number">3</span><span class="default">&gt;   <a href="dictionary_M.html#6984">m_coords</a>; </span><span class="comment">//!&lt; The translation vector [x,y,z] access directly or with x(), y(), z() setter/getter methods.</span>
<a name="82"><font size=-1>82     </font></a><span class="comment">	</span><span class="keyword">protected</span><span class="default">:</span>
<a name="83"><font size=-1>83     </font></a><span class="default">		mrpt::math::<a href="dictionary_M.html#176">CMatrixDouble33</a>   <a href="dictionary_M.html#6985">m_ROT</a>;    </span><span class="comment">//!&lt; The 3x3 rotation matrix, access with getRotationMatrix(), setRotationMatrix() (It's not safe to set this field as public)</span>
<a name="84"><font size=-1>84     </font></a><span class="comment"></span>
<a name="85"><font size=-1>85     </font></a><span class="comment">		</span><span class="keyword">mutable bool 	<a href="dictionary_M.html#6986">m_ypr_uptodate</a></span><span class="default">;			</span><span class="comment">//!&lt; Whether yaw/pitch/roll members are up-to-date since the last rotation matrix update.</span>
<a name="86"><font size=-1>86     </font></a><span class="comment">		</span><span class="keyword">mutable double	<a href="dictionary_M.html#6987">m_yaw</a></span><span class="default">, <a href="dictionary_M.html#6988">m_pitch</a>, <a href="dictionary_M.html#6989">m_roll</a>;	</span><span class="comment">//!&lt; These variables are updated every time that the object rotation matrix is modified (construction, loading from values, pose composition, etc )</span>
<a name="87"><font size=-1>87     </font></a><span class="comment"></span>
<a name="88"><font size=-1>88     </font></a><span class="comment">		/** Rebuild the homog matrix from the angles. */</span>
<a name="89"><font size=-1>89     </font></a><span class="comment">		</span><span class="keyword">void  <a href="dictionary_M.html#6990">rebuildRotationMatrix</a></span><span class="default">();</span>
<a name="90"><font size=-1>90     </font></a><span class="default"></span>
<a name="91"><font size=-1>91     </font></a><span class="default">		</span><span class="comment">/** Updates Yaw/pitch/roll members from the m_ROT  */</span>
<a name="92"><font size=-1>92     </font></a><span class="comment">		</span><span class="keyword">inline void <a href="dictionary_M.html#6991">updateYawPitchRoll</a></span><span class="default">() </span><span class="keyword">const </span><span class="default">{ </span><span class="keyword">if </span><span class="default">(!<a href="dictionary_M.html#6986">m_ypr_uptodate</a>) { <a href="dictionary_M.html#6986">m_ypr_uptodate</a>=</span><span class="keyword">true</span><span class="default">; <a href="dictionary_M.html#7076">getYawPitchRoll</a>( <a href="dictionary_M.html#6987">m_yaw</a>, <a href="dictionary_M.html#6988">m_pitch</a>, <a href="dictionary_M.html#6989">m_roll</a> ); } }</span>
<a name="93"><font size=-1>93     </font></a><span class="default"></span>
<a name="94"><font size=-1>94     </font></a><span class="default">	 </span><span class="keyword">public</span><span class="default">:</span>
<a name="95"><font size=-1>95     </font></a><span class="default">		</span><span class="comment">/** @name Constructors</span>
<a name="96"><font size=-1>96     </font></a><span class="comment">		    @{ */</span>
<a name="97"><font size=-1>97     </font></a><span class="comment"></span>
<a name="98"><font size=-1>98     </font></a><span class="comment">		/** Default constructor, with all the coordinates set to zero. */</span>
<a name="99"><font size=-1>99     </font></a><span class="comment">		<a href="dictionary_M.html#1417">CPose3D</a></span><span class="default">();</span>
<a name="100"><font size=-1>100     </font></a><span class="default"></span>
<a name="101"><font size=-1>101     </font></a><span class="default">		</span><span class="comment">/** Constructor with initilization of the pose; (remember that angles are always given in radians!)  */</span>
<a name="102"><font size=-1>102     </font></a><span class="comment">		<a href="dictionary_M.html#6992">CPose3D</a></span><span class="default">(</span><span class="keyword">const double </span><span class="default">x,</span><span class="keyword">const double  </span><span class="default">y,</span><span class="keyword">const double  </span><span class="default">z,</span><span class="keyword">const double  </span><span class="default">yaw=</span><span class="number">0</span><span class="default">, </span><span class="keyword">const double  </span><span class="default">pitch=</span><span class="number">0</span><span class="default">, </span><span class="keyword">const double </span><span class="default">roll=</span><span class="number">0</span><span class="default">);</span>
<a name="103"><font size=-1>103     </font></a><span class="default"></span>
<a name="104"><font size=-1>104     </font></a><span class="default">		</span><span class="comment">/** Constructor from a 4x4 homogeneous matrix - the passed matrix can be actually of any size larger than or equal 3x4, since only those first values are used (the last row of a homogeneous 4x4 matrix are always fixed). */</span>
<a name="105"><font size=-1>105     </font></a><span class="comment">		</span><span class="keyword">explicit <a href="dictionary_M.html#6993">CPose3D</a></span><span class="default">(</span><span class="keyword">const </span><span class="default">math::<a href="dictionary_M.html#206">CMatrixDouble</a> &amp;m);</span>
<a name="106"><font size=-1>106     </font></a><span class="default"></span>
<a name="107"><font size=-1>107     </font></a><span class="default">		</span><span class="comment">/** Constructor from a 4x4 homogeneous matrix: */</span>
<a name="108"><font size=-1>108     </font></a><span class="comment">		</span><span class="keyword">explicit <a href="dictionary_M.html#6994">CPose3D</a></span><span class="default">(</span><span class="keyword">const </span><span class="default">math::<a href="dictionary_M.html#582">CMatrixDouble44</a> &amp;m);</span>
<a name="109"><font size=-1>109     </font></a><span class="default"></span>
<a name="110"><font size=-1>110     </font></a><span class="default">		</span><span class="comment">/** Constructor from a 3x3 rotation matrix and a the translation given as a 3-vector, a 3-array, a CPoint3D or a mrpt::math::TPoint3D */</span>
<a name="111"><font size=-1>111     </font></a><span class="comment">		</span><span class="keyword">template </span><span class="default">&lt;</span><span class="keyword">class <a href="dictionary_M.html#6996">MATRIX33</a></span><span class="default">,</span><span class="keyword">class <a href="dictionary_V.html#6997">VECTOR3</a></span><span class="default">&gt;</span>
<a name="112"><font size=-1>112     </font></a><span class="default">		</span><span class="keyword">inline <a href="dictionary_M.html#6995">CPose3D</a></span><span class="default">(</span><span class="keyword">const <a href="dictionary_M.html#6996">MATRIX33</a> </span><span class="default">&amp;<a href="dictionary_R.html#6998">rot</a>, </span><span class="keyword">const <a href="dictionary_V.html#6997">VECTOR3</a></span><span class="default">&amp; <a href="dictionary_X.html#6999">xyz</a>) : <a href="dictionary_M.html#6985">m_ROT</a>(mrpt::math::UNINITIALIZED_MATRIX), <a href="dictionary_M.html#6986">m_ypr_uptodate</a>(</span><span class="keyword">false</span><span class="default">)</span>
<a name="113"><font size=-1>113     </font></a><span class="default">		{</span>
<a name="114"><font size=-1>114     </font></a><span class="default">			<a href="dictionary_A.html#1786">ASSERT_EQUAL_</a>(mrpt::math::<a href="dictionary_S.html#442">size</a>(<a href="dictionary_R.html#6998">rot</a>,</span><span class="number">1</span><span class="default">),</span><span class="number">3</span><span class="default">); <a href="dictionary_A.html#1786">ASSERT_EQUAL_</a>(mrpt::math::<a href="dictionary_S.html#442">size</a>(rot,</span><span class="number">2</span><span class="default">),</span><span class="number">3</span><span class="default">);<a href="dictionary_A.html#1786">ASSERT_EQUAL_</a>(<a href="dictionary_X.html#6999">xyz</a>.size(),</span><span class="number">3</span><span class="default">)</span>
<a name="115"><font size=-1>115     </font></a><span class="default">			</span><span class="keyword">for </span><span class="default">(</span><span class="keyword">int <a href="dictionary_R.html#7127">r</a></span><span class="default">=</span><span class="number">0</span><span class="default">;<a href="dictionary_R.html#7127">r</a>&lt;</span><span class="number">3</span><span class="default">;<a href="dictionary_R.html#7127">r</a>++)</span>
<a name="116"><font size=-1>116     </font></a><span class="default">				</span><span class="keyword">for </span><span class="default">(</span><span class="keyword">int <a href="dictionary_C.html#7128">c</a></span><span class="default">=</span><span class="number">0</span><span class="default">;<a href="dictionary_C.html#7128">c</a>&lt;</span><span class="number">3</span><span class="default">;<a href="dictionary_C.html#7128">c</a>++)</span>
<a name="117"><font size=-1>117     </font></a><span class="default">					<a href="dictionary_M.html#6985">m_ROT</a>(<a href="dictionary_R.html#7127">r</a>,<a href="dictionary_C.html#7128">c</a>)=<a href="dictionary_R.html#6998">rot</a>.<a href="dictionary_G.html#7129">get_unsafe</a>(<a href="dictionary_R.html#7127">r</a>,<a href="dictionary_C.html#7128">c</a>);</span>
<a name="118"><font size=-1>118     </font></a><span class="default">			</span><span class="keyword">for </span><span class="default">(</span><span class="keyword">int <a href="dictionary_R.html#7130">r</a></span><span class="default">=</span><span class="number">0</span><span class="default">;<a href="dictionary_R.html#7130">r</a>&lt;</span><span class="number">3</span><span class="default">;<a href="dictionary_R.html#7130">r</a>++) <a href="dictionary_M.html#6984">m_coords</a>[<a href="dictionary_R.html#7130">r</a>]=<a href="dictionary_X.html#6999">xyz</a>[<a href="dictionary_R.html#7130">r</a>];</span>
<a name="119"><font size=-1>119     </font></a><span class="default">		}</span>
<a name="120"><font size=-1>120     </font></a><span class="default">		</span><span class="comment">//! \overload</span>
<a name="121"><font size=-1>121     </font></a><span class="comment">		</span><span class="keyword">inline <a href="dictionary_M.html#7000">CPose3D</a></span><span class="default">(</span><span class="keyword">const </span><span class="default">mrpt::math::<a href="dictionary_M.html#176">CMatrixDouble33</a> &amp;<a href="dictionary_R.html#7001">rot</a>, </span><span class="keyword">const </span><span class="default">mrpt::math::<a href="dictionary_M.html#699">CArrayDouble</a>&lt;</span><span class="number">3</span><span class="default">&gt;&amp; <a href="dictionary_X.html#7002">xyz</a>) : <a href="dictionary_M.html#6984">m_coords</a>(<a href="dictionary_X.html#7002">xyz</a>),<a href="dictionary_M.html#6985">m_ROT</a>(<a href="dictionary_R.html#7001">rot</a>), <a href="dictionary_M.html#6986">m_ypr_uptodate</a>(</span><span class="keyword">false</span><span class="default">)</span>
<a name="122"><font size=-1>122     </font></a><span class="default">		{ }</span>
<a name="123"><font size=-1>123     </font></a><span class="default"></span>
<a name="124"><font size=-1>124     </font></a><span class="default">		</span><span class="comment">/** Constructor from a CPose2D object.</span>
<a name="125"><font size=-1>125     </font></a><span class="comment">		*/</span>
<a name="126"><font size=-1>126     </font></a><span class="comment">		<a href="dictionary_M.html#7003">CPose3D</a></span><span class="default">(</span><span class="keyword">const <a href="dictionary_M.html#180">CPose2D</a> </span><span class="default">&amp;);</span>
<a name="127"><font size=-1>127     </font></a><span class="default"></span>
<a name="128"><font size=-1>128     </font></a><span class="default">		</span><span class="comment">/** Constructor from a CPoint3D object.</span>
<a name="129"><font size=-1>129     </font></a><span class="comment">		*/</span>
<a name="130"><font size=-1>130     </font></a><span class="comment">		<a href="dictionary_M.html#7004">CPose3D</a></span><span class="default">(</span><span class="keyword">const <a href="dictionary_M.html#596">CPoint3D</a> </span><span class="default">&amp;);</span>
<a name="131"><font size=-1>131     </font></a><span class="default"></span>
<a name="132"><font size=-1>132     </font></a><span class="default">		</span><span class="comment">/** Constructor from lightweight object.</span>
<a name="133"><font size=-1>133     </font></a><span class="comment">		*/</span>
<a name="134"><font size=-1>134     </font></a><span class="comment">		<a href="dictionary_M.html#7005">CPose3D</a></span><span class="default">(</span><span class="keyword">const </span><span class="default">mrpt::math::<a href="dictionary_M.html#1292">TPose3D</a> &amp;);</span>
<a name="135"><font size=-1>135     </font></a><span class="default"></span>
<a name="136"><font size=-1>136     </font></a><span class="default">		</span><span class="comment">/** Constructor from a quaternion (which only represents the 3D rotation part) and a 3D displacement. */</span>
<a name="137"><font size=-1>137     </font></a><span class="comment">		<a href="dictionary_M.html#7006">CPose3D</a></span><span class="default">(</span><span class="keyword">const </span><span class="default">mrpt::math::<a href="dictionary_M.html#585">CQuaternionDouble</a> &amp;q, </span><span class="keyword">const double </span><span class="default">x, </span><span class="keyword">const double </span><span class="default">y, </span><span class="keyword">const double </span><span class="default">z );</span>
<a name="138"><font size=-1>138     </font></a><span class="default"></span>
<a name="139"><font size=-1>139     </font></a><span class="default">		</span><span class="comment">/** Constructor from a CPose3DQuat. */</span>
<a name="140"><font size=-1>140     </font></a><span class="comment">		<a href="dictionary_M.html#7007">CPose3D</a></span><span class="default">(</span><span class="keyword">const <a href="dictionary_M.html#612">CPose3DQuat</a> </span><span class="default">&amp;);</span>
<a name="141"><font size=-1>141     </font></a><span class="default"></span>
<a name="142"><font size=-1>142     </font></a><span class="default">		</span><span class="comment">/** Constructor from a CPose3DRotVec. */</span>
<a name="143"><font size=-1>143     </font></a><span class="comment">		<a href="dictionary_M.html#7008">CPose3D</a></span><span class="default">(</span><span class="keyword">const <a href="dictionary_M.html#513">CPose3DRotVec</a> </span><span class="default">&amp;p );</span>
<a name="144"><font size=-1>144     </font></a><span class="default"></span>
<a name="145"><font size=-1>145     </font></a><span class="default">		</span><span class="comment">/** Fast constructor that leaves all the data uninitialized - call with UNINITIALIZED_POSE as argument */</span>
<a name="146"><font size=-1>146     </font></a><span class="comment">		</span><span class="keyword">inline <a href="dictionary_M.html#7009">CPose3D</a></span><span class="default">(<a href="dictionary_M.html#568">TConstructorFlags_Poses</a> ) : <a href="dictionary_M.html#6985">m_ROT</a>(mrpt::math::UNINITIALIZED_MATRIX), <a href="dictionary_M.html#6986">m_ypr_uptodate</a>(</span><span class="keyword">false</span><span class="default">) { }</span>
<a name="147"><font size=-1>147     </font></a><span class="default"></span>
<a name="148"><font size=-1>148     </font></a><span class="default">		</span><span class="comment">/** Constructor from an array with these 12 elements: [r11 r21 r31 r12 r22 r32 r13 r23 r33 tx ty tz]</span>
<a name="149"><font size=-1>149     </font></a><span class="comment">		  *  where r{ij} are the entries of the 3x3 rotation matrix and t{x,y,z} are the 3D translation of the pose</span>
<a name="150"><font size=-1>150     </font></a><span class="comment">		  *  \sa setFrom12Vector, getAs12Vector</span>
<a name="151"><font size=-1>151     </font></a><span class="comment">		  */</span>
<a name="152"><font size=-1>152     </font></a><span class="comment">		</span><span class="keyword">inline explicit <a href="dictionary_M.html#7011">CPose3D</a></span><span class="default">(</span><span class="keyword">const </span><span class="default">mrpt::math::<a href="dictionary_M.html#699">CArrayDouble</a>&lt;</span><span class="number">12</span><span class="default">&gt; &amp;<a href="dictionary_V.html#7012">vec12</a>) : <a href="dictionary_M.html#6985">m_ROT</a>( mrpt::math::UNINITIALIZED_MATRIX ), <a href="dictionary_M.html#6986">m_ypr_uptodate</a>(</span><span class="keyword">false</span><span class="default">) {</span>
<a name="153"><font size=-1>153     </font></a><span class="default">			<a href="dictionary_M.html#7070">setFrom12Vector</a>(<a href="dictionary_V.html#7012">vec12</a>);</span>
<a name="154"><font size=-1>154     </font></a><span class="default">		}</span>
<a name="155"><font size=-1>155     </font></a><span class="default"></span>
<a name="156"><font size=-1>156     </font></a><span class="default">		</span><span class="comment">/** @} */  // end Constructors</span>
<a name="157"><font size=-1>157     </font></a><span class="comment"></span>
<a name="158"><font size=-1>158     </font></a><span class="comment"></span>
<a name="159"><font size=-1>159     </font></a><span class="comment"></span>
<a name="160"><font size=-1>160     </font></a><span class="comment">		/** @name Access 3x3 rotation and 4x4 homogeneous matrices</span>
<a name="161"><font size=-1>161     </font></a><span class="comment">		    @{ */</span>
<a name="162"><font size=-1>162     </font></a><span class="comment"></span>
<a name="163"><font size=-1>163     </font></a><span class="comment">		/** Returns the corresponding 4x4 homogeneous transformation matrix for the point(translation) or pose (translation+orientation).</span>
<a name="164"><font size=-1>164     </font></a><span class="comment">		  * \sa getInverseHomogeneousMatrix, getRotationMatrix</span>
<a name="165"><font size=-1>165     </font></a><span class="comment">		  */</span>
<a name="166"><font size=-1>166     </font></a><span class="comment">		</span><span class="keyword">inline void  <a href="dictionary_M.html#7013">getHomogeneousMatrix</a></span><span class="default">(mrpt::math::<a href="dictionary_M.html#582">CMatrixDouble44</a> &amp; <a href="dictionary_O.html#7014">out_HM</a> ) </span><span class="keyword">const</span>
<a name="167"><font size=-1>167     </font></a><span class="keyword">		</span><span class="default">{</span>
<a name="168"><font size=-1>168     </font></a><span class="default">			<a href="dictionary_O.html#7014">out_HM</a>.<a href="dictionary_M.html#7131">insertMatrix</a>(</span><span class="number">0</span><span class="default">,</span><span class="number">0</span><span class="default">,<a href="dictionary_M.html#6985">m_ROT</a>);</span>
<a name="169"><font size=-1>169     </font></a><span class="default">			</span><span class="keyword">for </span><span class="default">(</span><span class="keyword">int <a href="dictionary_I.html#7132">i</a></span><span class="default">=</span><span class="number">0</span><span class="default">;<a href="dictionary_I.html#7132">i</a>&lt;</span><span class="number">3</span><span class="default">;<a href="dictionary_I.html#7132">i</a>++) <a href="dictionary_O.html#7014">out_HM</a>(<a href="dictionary_I.html#7132">i</a>,</span><span class="number">3</span><span class="default">)=<a href="dictionary_M.html#6984">m_coords</a>[<a href="dictionary_I.html#7132">i</a>];</span>
<a name="170"><font size=-1>170     </font></a><span class="default">			<a href="dictionary_O.html#7014">out_HM</a>(</span><span class="number">3</span><span class="default">,</span><span class="number">0</span><span class="default">)=<a href="dictionary_O.html#7014">out_HM</a>(</span><span class="number">3</span><span class="default">,</span><span class="number">1</span><span class="default">)=<a href="dictionary_O.html#7014">out_HM</a>(</span><span class="number">3</span><span class="default">,</span><span class="number">2</span><span class="default">)=</span><span class="number">0.</span><span class="default">; <a href="dictionary_O.html#7014">out_HM</a>(</span><span class="number">3</span><span class="default">,</span><span class="number">3</span><span class="default">)=</span><span class="number">1.</span><span class="default">;</span>
<a name="171"><font size=-1>171     </font></a><span class="default">		}</span>
<a name="172"><font size=-1>172     </font></a><span class="default"></span>
<a name="173"><font size=-1>173     </font></a><span class="default">		</span><span class="keyword">inline </span><span class="default">mrpt::math::<a href="dictionary_M.html#582">CMatrixDouble44</a> <a href="dictionary_M.html#7015">getHomogeneousMatrixVal</a>() </span><span class="keyword">const </span><span class="default">{ mrpt::math::<a href="dictionary_M.html#582">CMatrixDouble44</a> <a href="dictionary_M.html#7133">M</a>; <a href="dictionary_M.html#7013">getHomogeneousMatrix</a>(<a href="dictionary_M.html#7133">M</a>); </span><span class="keyword">return <a href="dictionary_M.html#7133">M</a></span><span class="default">;}</span>
<a name="174"><font size=-1>174     </font></a><span class="default"></span>
<a name="175"><font size=-1>175     </font></a><span class="default">		</span><span class="comment">/** Get the 3x3 rotation matrix \sa getHomogeneousMatrix  */</span>
<a name="176"><font size=-1>176     </font></a><span class="comment">		</span><span class="keyword">inline void <a href="dictionary_M.html#7016">getRotationMatrix</a></span><span class="default">( mrpt::math::<a href="dictionary_M.html#176">CMatrixDouble33</a> &amp; <a href="dictionary_R.html#7017">ROT</a> ) </span><span class="keyword">const </span><span class="default">{ <a href="dictionary_R.html#7017">ROT</a> = <a href="dictionary_M.html#6985">m_ROT</a>; }</span>
<a name="177"><font size=-1>177     </font></a><span class="default">		</span><span class="comment">//! \overload</span>
<a name="178"><font size=-1>178     </font></a><span class="comment">		</span><span class="keyword">inline const </span><span class="default">mrpt::math::<a href="dictionary_M.html#176">CMatrixDouble33</a> &amp; <a href="dictionary_M.html#7018">getRotationMatrix</a>() </span><span class="keyword">const </span><span class="default">{ </span><span class="keyword">return <a href="dictionary_M.html#6985">m_ROT</a></span><span class="default">; }</span>
<a name="179"><font size=-1>179     </font></a><span class="default"></span>
<a name="180"><font size=-1>180     </font></a><span class="default">		</span><span class="comment">/** Sets the 3x3 rotation matrix \sa getRotationMatrix, getHomogeneousMatrix  */</span>
<a name="181"><font size=-1>181     </font></a><span class="comment">		</span><span class="keyword">inline void <a href="dictionary_M.html#7019">setRotationMatrix</a></span><span class="default">( </span><span class="keyword">const </span><span class="default">mrpt::math::<a href="dictionary_M.html#176">CMatrixDouble33</a> &amp; <a href="dictionary_R.html#7020">ROT</a> ) { <a href="dictionary_M.html#6985">m_ROT</a> = <a href="dictionary_R.html#7020">ROT</a>; <a href="dictionary_M.html#6986">m_ypr_uptodate</a> = </span><span class="keyword">false</span><span class="default">; }</span>
<a name="182"><font size=-1>182     </font></a><span class="default"></span>
<a name="183"><font size=-1>183     </font></a><span class="default">		</span><span class="comment">/** @} */  // end rot and HM</span>
<a name="184"><font size=-1>184     </font></a><span class="comment"></span>
<a name="185"><font size=-1>185     </font></a><span class="comment"></span>
<a name="186"><font size=-1>186     </font></a><span class="comment">		/** @name Pose-pose and pose-point compositions and operators</span>
<a name="187"><font size=-1>187     </font></a><span class="comment">		    @{ */</span>
<a name="188"><font size=-1>188     </font></a><span class="comment"></span>
<a name="189"><font size=-1>189     </font></a><span class="comment">		/** The operator \f$ a \oplus b \f$ is the pose compounding operator. */</span>
<a name="190"><font size=-1>190     </font></a><span class="comment">		</span><span class="keyword">inline <a href="dictionary_M.html#182">CPose3D</a>  operator </span><span class="default">+ (</span><span class="keyword">const <a href="dictionary_M.html#182">CPose3D</a></span><span class="default">&amp; <a href="dictionary_B.html#7022">b</a>) </span><span class="keyword">const</span>
<a name="191"><font size=-1>191     </font></a><span class="keyword">		</span><span class="default">{</span>
<a name="192"><font size=-1>192     </font></a><span class="default">			<a href="dictionary_M.html#1417">CPose3D</a>   <a href="dictionary_R.html#7134">ret</a>(UNINITIALIZED_POSE);</span>
<a name="193"><font size=-1>193     </font></a><span class="default">			<a href="dictionary_R.html#7134">ret</a>.<a href="dictionary_M.html#7048">composeFrom</a>(*</span><span class="keyword">this</span><span class="default">,<a href="dictionary_B.html#7022">b</a>);</span>
<a name="194"><font size=-1>194     </font></a><span class="default">			</span><span class="keyword">return <a href="dictionary_R.html#7134">ret</a></span><span class="default">;</span>
<a name="195"><font size=-1>195     </font></a><span class="default">		}</span>
<a name="196"><font size=-1>196     </font></a><span class="default"></span>
<a name="197"><font size=-1>197     </font></a><span class="default">		</span><span class="comment">/** The operator \f$ a \oplus b \f$ is the pose compounding operator. */</span>
<a name="198"><font size=-1>198     </font></a><span class="comment">		<a href="dictionary_M.html#596">CPoint3D</a>  </span><span class="keyword">operator </span><span class="default">+ (</span><span class="keyword">const <a href="dictionary_M.html#596">CPoint3D</a></span><span class="default">&amp; b) </span><span class="keyword">const</span><span class="default">;</span>
<a name="199"><font size=-1>199     </font></a><span class="default"></span>
<a name="200"><font size=-1>200     </font></a><span class="default">		</span><span class="comment">/** The operator \f$ a \oplus b \f$ is the pose compounding operator. */</span>
<a name="201"><font size=-1>201     </font></a><span class="comment">		<a href="dictionary_M.html#596">CPoint3D</a>  </span><span class="keyword">operator </span><span class="default">+ (</span><span class="keyword">const <a href="dictionary_M.html#598">CPoint2D</a></span><span class="default">&amp; b) </span><span class="keyword">const</span><span class="default">;</span>
<a name="202"><font size=-1>202     </font></a><span class="default"></span>
<a name="203"><font size=-1>203     </font></a><span class="default">        </span><span class="comment">/** Computes the spherical coordinates of a 3D point as seen from the 6D pose specified by this object. For the coordinate system see the top of this page. */</span>
<a name="204"><font size=-1>204     </font></a><span class="comment">        </span><span class="keyword">void <a href="dictionary_M.html#7025">sphericalCoordinates</a></span><span class="default">(</span>
<a name="205"><font size=-1>205     </font></a><span class="default">            </span><span class="keyword">const </span><span class="default">mrpt::math::<a href="dictionary_M.html#603">TPoint3D</a> &amp;point,</span>
<a name="206"><font size=-1>206     </font></a><span class="default">            </span><span class="keyword">double </span><span class="default">&amp;out_range,</span>
<a name="207"><font size=-1>207     </font></a><span class="default">            </span><span class="keyword">double </span><span class="default">&amp;out_yaw,</span>
<a name="208"><font size=-1>208     </font></a><span class="default">            </span><span class="keyword">double </span><span class="default">&amp;out_pitch ) </span><span class="keyword">const</span><span class="default">;</span>
<a name="209"><font size=-1>209     </font></a><span class="default"></span>
<a name="210"><font size=-1>210     </font></a><span class="default">		</span><span class="comment">/** An alternative, slightly more efficient way of doing \f$ G = P \oplus L \f$ with G and L being 3D points and P this 6D pose.</span>
<a name="211"><font size=-1>211     </font></a><span class="comment">		  *  If pointers are provided, the corresponding Jacobians are returned.</span>
<a name="212"><font size=-1>212     </font></a><span class="comment">		  *  &quot;out_jacobian_df_dse3&quot; stands for the Jacobian with respect to the 6D locally Euclidean vector in the tangent space of SE(3).</span>
<a name="213"><font size=-1>213     </font></a><span class="comment">		  *  See [this report](http://ingmec.ual.es/~jlblanco/papers/jlblanco2010geometry3D_techrep.pdf) for mathematical details.</span>
<a name="214"><font size=-1>214     </font></a><span class="comment">		  *  \param  If set to true, the Jacobian &quot;out_jacobian_df_dpose&quot; uses a fastest linearized appoximation (valid only for small rotations!).</span>
<a name="215"><font size=-1>215     </font></a><span class="comment">		  */</span>
<a name="216"><font size=-1>216     </font></a><span class="comment">		</span><span class="keyword">void <a href="dictionary_M.html#1475">composePoint</a></span><span class="default">(</span><span class="keyword">double </span><span class="default">lx,</span><span class="keyword">double </span><span class="default">ly,</span><span class="keyword">double </span><span class="default">lz, </span><span class="keyword">double </span><span class="default">&amp;gx, </span><span class="keyword">double </span><span class="default">&amp;gy, </span><span class="keyword">double </span><span class="default">&amp;gz,</span>
<a name="217"><font size=-1>217     </font></a><span class="default">			mrpt::math::<a href="dictionary_M.html#605">CMatrixFixedNumeric</a>&lt;</span><span class="keyword">double</span><span class="default">,</span><span class="number">3</span><span class="default">,</span><span class="number">3</span><span class="default">&gt;  *out_jacobian_df_dpoint=NULL,</span>
<a name="218"><font size=-1>218     </font></a><span class="default">			mrpt::math::<a href="dictionary_M.html#605">CMatrixFixedNumeric</a>&lt;</span><span class="keyword">double</span><span class="default">,</span><span class="number">3</span><span class="default">,</span><span class="number">6</span><span class="default">&gt;  *out_jacobian_df_dpose=NULL,</span>
<a name="219"><font size=-1>219     </font></a><span class="default">			mrpt::math::<a href="dictionary_M.html#605">CMatrixFixedNumeric</a>&lt;</span><span class="keyword">double</span><span class="default">,</span><span class="number">3</span><span class="default">,</span><span class="number">6</span><span class="default">&gt;  *out_jacobian_df_dse3=NULL,</span>
<a name="220"><font size=-1>220     </font></a><span class="default">			</span><span class="keyword">bool </span><span class="default">use_small_rot_approx = </span><span class="keyword">false</span><span class="default">) </span><span class="keyword">const</span><span class="default">;</span>
<a name="221"><font size=-1>221     </font></a><span class="default"></span>
<a name="222"><font size=-1>222     </font></a><span class="default">		</span><span class="comment">/** An alternative, slightly more efficient way of doing \f$ G = P \oplus L \f$ with G and L being 3D points and P this 6D pose.</span>
<a name="223"><font size=-1>223     </font></a><span class="comment">		  * \note local_point is passed by value to allow global and local point to be the same variable</span>
<a name="224"><font size=-1>224     </font></a><span class="comment">		  */</span>
<a name="225"><font size=-1>225     </font></a><span class="comment">		</span><span class="keyword">inline void <a href="dictionary_M.html#7026">composePoint</a></span><span class="default">(</span><span class="keyword">const </span><span class="default">mrpt::math::<a href="dictionary_M.html#603">TPoint3D</a> &amp;<a href="dictionary_L.html#7027">local_point</a>, mrpt::math::<a href="dictionary_M.html#603">TPoint3D</a> &amp;<a href="dictionary_G.html#7028">global_point</a>) </span><span class="keyword">const </span><span class="default">{</span>
<a name="226"><font size=-1>226     </font></a><span class="default">			<a href="dictionary_M.html#1475">composePoint</a>(<a href="dictionary_L.html#7027">local_point</a>.<a href="dictionary_M.html#709">x</a>,<a href="dictionary_L.html#7027">local_point</a>.<a href="dictionary_M.html#710">y</a>,<a href="dictionary_L.html#7027">local_point</a>.<a href="dictionary_M.html#711">z</a>,  <a href="dictionary_G.html#7028">global_point</a>.<a href="dictionary_M.html#709">x</a>,<a href="dictionary_G.html#7028">global_point</a>.<a href="dictionary_M.html#710">y</a>,<a href="dictionary_G.html#7028">global_point</a>.<a href="dictionary_M.html#711">z</a> );</span>
<a name="227"><font size=-1>227     </font></a><span class="default">		}</span>
<a name="228"><font size=-1>228     </font></a><span class="default">		</span><span class="comment">/** This version of the method assumes that the resulting point has no Z component (use with caution!) */</span>
<a name="229"><font size=-1>229     </font></a><span class="comment">		</span><span class="keyword">inline void <a href="dictionary_M.html#7029">composePoint</a></span><span class="default">(</span><span class="keyword">const </span><span class="default">mrpt::math::<a href="dictionary_M.html#603">TPoint3D</a> &amp;<a href="dictionary_L.html#7030">local_point</a>, mrpt::math::<a href="dictionary_M.html#1294">TPoint2D</a> &amp;<a href="dictionary_G.html#7031">global_point</a>) </span><span class="keyword">const </span><span class="default">{</span>
<a name="230"><font size=-1>230     </font></a><span class="default">			</span><span class="keyword">double <a href="dictionary_D.html#7135">dummy_z</a></span><span class="default">;</span>
<a name="231"><font size=-1>231     </font></a><span class="default">			<a href="dictionary_M.html#1475">composePoint</a>(<a href="dictionary_L.html#7030">local_point</a>.<a href="dictionary_M.html#709">x</a>,<a href="dictionary_L.html#7030">local_point</a>.<a href="dictionary_M.html#710">y</a>,<a href="dictionary_L.html#7030">local_point</a>.<a href="dictionary_M.html#711">z</a>,  <a href="dictionary_G.html#7031">global_point</a>.<a href="dictionary_M.html#7136">x</a>,<a href="dictionary_G.html#7031">global_point</a>.<a href="dictionary_M.html#7137">y</a>,<a href="dictionary_D.html#7135">dummy_z</a> );</span>
<a name="232"><font size=-1>232     </font></a><span class="default">		}</span>
<a name="233"><font size=-1>233     </font></a><span class="default"></span>
<a name="234"><font size=-1>234     </font></a><span class="default">		</span><span class="comment">/** An alternative, slightly more efficient way of doing \f$ G = P \oplus L \f$ with G and L being 3D points and P this 6D pose.  */</span>
<a name="235"><font size=-1>235     </font></a><span class="comment">		</span><span class="keyword">inline void <a href="dictionary_M.html#7032">composePoint</a></span><span class="default">(</span><span class="keyword">double <a href="dictionary_L.html#7033">lx</a></span><span class="default">,</span><span class="keyword">double <a href="dictionary_L.html#7034">ly</a></span><span class="default">,</span><span class="keyword">double <a href="dictionary_L.html#7035">lz</a></span><span class="default">, </span><span class="keyword">float </span><span class="default">&amp;<a href="dictionary_G.html#7036">gx</a>, </span><span class="keyword">float </span><span class="default">&amp;<a href="dictionary_G.html#7037">gy</a>, </span><span class="keyword">float </span><span class="default">&amp;<a href="dictionary_G.html#7038">gz</a> ) </span><span class="keyword">const </span><span class="default">{</span>
<a name="236"><font size=-1>236     </font></a><span class="default">			</span><span class="keyword">double <a href="dictionary_G.html#7138">ggx</a></span><span class="default">, <a href="dictionary_G.html#7139">ggy</a>,<a href="dictionary_G.html#7140">ggz</a>;</span>
<a name="237"><font size=-1>237     </font></a><span class="default">			<a href="dictionary_M.html#1475">composePoint</a>(<a href="dictionary_L.html#7033">lx</a>,<a href="dictionary_L.html#7034">ly</a>,<a href="dictionary_L.html#7035">lz</a>,<a href="dictionary_G.html#7138">ggx</a>,<a href="dictionary_G.html#7139">ggy</a>,<a href="dictionary_G.html#7140">ggz</a>);</span>
<a name="238"><font size=-1>238     </font></a><span class="default">			<a href="dictionary_G.html#7036">gx</a> = <a href="dictionary_G.html#7138">ggx</a>; <a href="dictionary_G.html#7037">gy</a> = <a href="dictionary_G.html#7139">ggy</a>; <a href="dictionary_G.html#7038">gz</a> = <a href="dictionary_G.html#7140">ggz</a>;</span>
<a name="239"><font size=-1>239     </font></a><span class="default">		}</span>
<a name="240"><font size=-1>240     </font></a><span class="default"></span>
<a name="241"><font size=-1>241     </font></a><span class="default">		</span><span class="comment">/**  Computes the 3D point L such as \f$ L = G \ominus this \f$.</span>
<a name="242"><font size=-1>242     </font></a><span class="comment">		  *  If pointers are provided, the corresponding Jacobians are returned.</span>
<a name="243"><font size=-1>243     </font></a><span class="comment">		  *  &quot;out_jacobian_df_dse3&quot; stands for the Jacobian with respect to the 6D locally Euclidean vector in the tangent space of SE(3).</span>
<a name="244"><font size=-1>244     </font></a><span class="comment">		  *  See [this report](http://ingmec.ual.es/~jlblanco/papers/jlblanco2010geometry3D_techrep.pdf) for mathematical details.</span>
<a name="245"><font size=-1>245     </font></a><span class="comment">		  * \sa composePoint, composeFrom</span>
<a name="246"><font size=-1>246     </font></a><span class="comment">		  */</span>
<a name="247"><font size=-1>247     </font></a><span class="comment">		</span><span class="keyword">void <a href="dictionary_M.html#7039">inverseComposePoint</a></span><span class="default">(</span><span class="keyword">const double </span><span class="default">gx,</span><span class="keyword">const double </span><span class="default">gy,</span><span class="keyword">const double </span><span class="default">gz,</span><span class="keyword">double </span><span class="default">&amp;lx,</span><span class="keyword">double </span><span class="default">&amp;ly,</span><span class="keyword">double </span><span class="default">&amp;lz,</span>
<a name="248"><font size=-1>248     </font></a><span class="default">			mrpt::math::<a href="dictionary_M.html#605">CMatrixFixedNumeric</a>&lt;</span><span class="keyword">double</span><span class="default">,</span><span class="number">3</span><span class="default">,</span><span class="number">3</span><span class="default">&gt;  *out_jacobian_df_dpoint=NULL,</span>
<a name="249"><font size=-1>249     </font></a><span class="default">			mrpt::math::<a href="dictionary_M.html#605">CMatrixFixedNumeric</a>&lt;</span><span class="keyword">double</span><span class="default">,</span><span class="number">3</span><span class="default">,</span><span class="number">6</span><span class="default">&gt;  *out_jacobian_df_dpose=NULL,</span>
<a name="250"><font size=-1>250     </font></a><span class="default">			mrpt::math::<a href="dictionary_M.html#605">CMatrixFixedNumeric</a>&lt;</span><span class="keyword">double</span><span class="default">,</span><span class="number">3</span><span class="default">,</span><span class="number">6</span><span class="default">&gt;  *out_jacobian_df_dse3=NULL ) </span><span class="keyword">const</span><span class="default">;</span>
<a name="251"><font size=-1>251     </font></a><span class="default"></span>
<a name="252"><font size=-1>252     </font></a><span class="default">		</span><span class="comment">/** \overload */</span>
<a name="253"><font size=-1>253     </font></a><span class="comment">		</span><span class="keyword">inline void <a href="dictionary_M.html#7040">inverseComposePoint</a></span><span class="default">(</span><span class="keyword">const </span><span class="default">mrpt::math::<a href="dictionary_M.html#603">TPoint3D</a> &amp;<a href="dictionary_G.html#7041">g</a>, mrpt::math::<a href="dictionary_M.html#603">TPoint3D</a> &amp;<a href="dictionary_L.html#7042">l</a>) </span><span class="keyword">const </span><span class="default">{</span>
<a name="254"><font size=-1>254     </font></a><span class="default">			<a href="dictionary_M.html#7039">inverseComposePoint</a>(<a href="dictionary_G.html#7041">g</a>.<a href="dictionary_M.html#709">x</a>,<a href="dictionary_G.html#7041">g</a>.<a href="dictionary_M.html#710">y</a>,<a href="dictionary_G.html#7041">g</a>.<a href="dictionary_M.html#711">z</a>, <a href="dictionary_L.html#7042">l</a>.<a href="dictionary_M.html#709">x</a>,<a href="dictionary_L.html#7042">l</a>.<a href="dictionary_M.html#710">y</a>,<a href="dictionary_L.html#7042">l</a>.<a href="dictionary_M.html#711">z</a>);</span>
<a name="255"><font size=-1>255     </font></a><span class="default">		}</span>
<a name="256"><font size=-1>256     </font></a><span class="default"></span>
<a name="257"><font size=-1>257     </font></a><span class="default">		</span><span class="comment">/** overload for 2D points \exception If the z component of the result is greater than some epsilon */</span>
<a name="258"><font size=-1>258     </font></a><span class="comment">		</span><span class="keyword">inline void <a href="dictionary_M.html#7043">inverseComposePoint</a></span><span class="default">(</span><span class="keyword">const </span><span class="default">mrpt::math::<a href="dictionary_M.html#1294">TPoint2D</a> &amp;<a href="dictionary_G.html#7044">g</a>, mrpt::math::<a href="dictionary_M.html#1294">TPoint2D</a> &amp;<a href="dictionary_L.html#7045">l</a>, </span><span class="keyword">const double <a href="dictionary_E.html#7046">eps</a></span><span class="default">=</span><span class="number">1e-6</span><span class="default">) </span><span class="keyword">const </span><span class="default">{</span>
<a name="259"><font size=-1>259     </font></a><span class="default">			</span><span class="keyword">double <a href="dictionary_L.html#7141">lz</a></span><span class="default">;</span>
<a name="260"><font size=-1>260     </font></a><span class="default">			<a href="dictionary_M.html#7039">inverseComposePoint</a>(<a href="dictionary_G.html#7044">g</a>.<a href="dictionary_M.html#7136">x</a>,<a href="dictionary_G.html#7044">g</a>.<a href="dictionary_M.html#7137">y</a>,</span><span class="number">0</span><span class="default">, <a href="dictionary_L.html#7045">l</a>.<a href="dictionary_M.html#7136">x</a>,<a href="dictionary_L.html#7045">l</a>.<a href="dictionary_M.html#7137">y</a>,<a href="dictionary_L.html#7141">lz</a>);</span>
<a name="261"><font size=-1>261     </font></a><span class="default">			<a href="dictionary_A.html#7047">ASSERT_BELOW_</a>(std::abs(lz),<a href="dictionary_E.html#7046">eps</a>)</span>
<a name="262"><font size=-1>262     </font></a><span class="default">		}</span>
<a name="263"><font size=-1>263     </font></a><span class="default"></span>
<a name="264"><font size=-1>264     </font></a><span class="default">		</span><span class="comment">/**  Makes &quot;this = A (+) B&quot;; this method is slightly more efficient than &quot;this= A + B;&quot; since it avoids the temporary object.</span>
<a name="265"><font size=-1>265     </font></a><span class="comment">		  *  \note A or B can be &quot;this&quot; without problems.</span>
<a name="266"><font size=-1>266     </font></a><span class="comment">		  */</span>
<a name="267"><font size=-1>267     </font></a><span class="comment">		</span><span class="keyword">void <a href="dictionary_M.html#7048">composeFrom</a></span><span class="default">(</span><span class="keyword">const <a href="dictionary_M.html#182">CPose3D</a></span><span class="default">&amp; A, </span><span class="keyword">const <a href="dictionary_M.html#182">CPose3D</a></span><span class="default">&amp; B );</span>
<a name="268"><font size=-1>268     </font></a><span class="default"></span>
<a name="269"><font size=-1>269     </font></a><span class="default">		</span><span class="comment">/** Make \f$ this = this \oplus b \f$  (\a b can be &quot;this&quot; without problems) */</span>
<a name="270"><font size=-1>270     </font></a><span class="comment">		</span><span class="keyword">inline <a href="dictionary_M.html#182">CPose3D</a></span><span class="default">&amp;  </span><span class="keyword">operator </span><span class="default">+= (</span><span class="keyword">const <a href="dictionary_M.html#182">CPose3D</a></span><span class="default">&amp; <a href="dictionary_B.html#7050">b</a>)</span>
<a name="271"><font size=-1>271     </font></a><span class="default">		{</span>
<a name="272"><font size=-1>272     </font></a><span class="default">			<a href="dictionary_M.html#7048">composeFrom</a>(*</span><span class="keyword">this</span><span class="default">,<a href="dictionary_B.html#7050">b</a>);</span>
<a name="273"><font size=-1>273     </font></a><span class="default">		 	</span><span class="keyword">return </span><span class="default">*</span><span class="keyword">this</span><span class="default">;</span>
<a name="274"><font size=-1>274     </font></a><span class="default">		}</span>
<a name="275"><font size=-1>275     </font></a><span class="default"></span>
<a name="276"><font size=-1>276     </font></a><span class="default">		</span><span class="comment">/**  Makes \f$ this = A \ominus B \f$ this method is slightly more efficient than &quot;this= A - B;&quot; since it avoids the temporary object.</span>
<a name="277"><font size=-1>277     </font></a><span class="comment">		  *  \note A or B can be &quot;this&quot; without problems.</span>
<a name="278"><font size=-1>278     </font></a><span class="comment">		  * \sa composeFrom, composePoint</span>
<a name="279"><font size=-1>279     </font></a><span class="comment">		  */</span>
<a name="280"><font size=-1>280     </font></a><span class="comment">		</span><span class="keyword">void <a href="dictionary_M.html#7051">inverseComposeFrom</a></span><span class="default">(</span><span class="keyword">const <a href="dictionary_M.html#182">CPose3D</a></span><span class="default">&amp; A, </span><span class="keyword">const <a href="dictionary_M.html#182">CPose3D</a></span><span class="default">&amp; B );</span>
<a name="281"><font size=-1>281     </font></a><span class="default"></span>
<a name="282"><font size=-1>282     </font></a><span class="default">		</span><span class="comment">/** Compute \f$ RET = this \oplus b \f$  */</span>
<a name="283"><font size=-1>283     </font></a><span class="comment">		</span><span class="keyword">inline <a href="dictionary_M.html#182">CPose3D</a>  operator </span><span class="default">- (</span><span class="keyword">const <a href="dictionary_M.html#182">CPose3D</a></span><span class="default">&amp; <a href="dictionary_B.html#7053">b</a>) </span><span class="keyword">const</span>
<a name="284"><font size=-1>284     </font></a><span class="keyword">		</span><span class="default">{</span>
<a name="285"><font size=-1>285     </font></a><span class="default">			<a href="dictionary_M.html#1417">CPose3D</a> <a href="dictionary_R.html#7142">ret</a>(UNINITIALIZED_POSE);</span>
<a name="286"><font size=-1>286     </font></a><span class="default">			<a href="dictionary_R.html#7142">ret</a>.<a href="dictionary_M.html#7051">inverseComposeFrom</a>(*</span><span class="keyword">this</span><span class="default">,<a href="dictionary_B.html#7053">b</a>);</span>
<a name="287"><font size=-1>287     </font></a><span class="default">			</span><span class="keyword">return <a href="dictionary_R.html#7142">ret</a></span><span class="default">;</span>
<a name="288"><font size=-1>288     </font></a><span class="default">		}</span>
<a name="289"><font size=-1>289     </font></a><span class="default"></span>
<a name="290"><font size=-1>290     </font></a><span class="default">		</span><span class="comment">/** Convert this pose into its inverse, saving the result in itself. \sa operator- */</span>
<a name="291"><font size=-1>291     </font></a><span class="comment">		</span><span class="keyword">void <a href="dictionary_M.html#7054">inverse</a></span><span class="default">();</span>
<a name="292"><font size=-1>292     </font></a><span class="default"></span>
<a name="293"><font size=-1>293     </font></a><span class="default">		</span><span class="comment">/** makes: this = p (+) this */</span>
<a name="294"><font size=-1>294     </font></a><span class="comment">		</span><span class="keyword">inline void  <a href="dictionary_M.html#7055">changeCoordinatesReference</a></span><span class="default">( </span><span class="keyword">const <a href="dictionary_M.html#182">CPose3D</a> </span><span class="default">&amp; <a href="dictionary_P.html#7056">p</a> ) { <a href="dictionary_M.html#7048">composeFrom</a>(<a href="dictionary_P.html#7056">p</a>,<a href="dictionary_M.html#1417">CPose3D</a>(*</span><span class="keyword">this</span><span class="default">)); }</span>
<a name="295"><font size=-1>295     </font></a><span class="default"></span>
<a name="296"><font size=-1>296     </font></a><span class="default">		</span><span class="comment">/** @} */  // compositions</span>
<a name="297"><font size=-1>297     </font></a><span class="comment"></span>
<a name="298"><font size=-1>298     </font></a><span class="comment"></span>
<a name="299"><font size=-1>299     </font></a><span class="comment">		/** @name Access and modify contents</span>
<a name="300"><font size=-1>300     </font></a><span class="comment">			@{ */</span>
<a name="301"><font size=-1>301     </font></a><span class="comment"></span>
<a name="302"><font size=-1>302     </font></a><span class="comment">		/** Scalar sum of all 6 components: This is diferent from poses composition, which is implemented as &quot;+&quot; operators.</span>
<a name="303"><font size=-1>303     </font></a><span class="comment">		  * \sa normalizeAngles</span>
<a name="304"><font size=-1>304     </font></a><span class="comment">		  */</span>
<a name="305"><font size=-1>305     </font></a><span class="comment">		</span><span class="keyword">void <a href="dictionary_M.html#7057">addComponents</a></span><span class="default">(</span><span class="keyword">const <a href="dictionary_M.html#182">CPose3D</a> </span><span class="default">&amp;p);</span>
<a name="306"><font size=-1>306     </font></a><span class="default"></span>
<a name="307"><font size=-1>307     </font></a><span class="default">		</span><span class="comment">/** Rebuild the internal matrix &amp; update the yaw/pitch/roll angles within the ]-PI,PI] range (Must be called after using addComponents)</span>
<a name="308"><font size=-1>308     </font></a><span class="comment">		  * \sa addComponents</span>
<a name="309"><font size=-1>309     </font></a><span class="comment">		  */</span>
<a name="310"><font size=-1>310     </font></a><span class="comment">		</span><span class="keyword">void  <a href="dictionary_M.html#7058">normalizeAngles</a></span><span class="default">();</span>
<a name="311"><font size=-1>311     </font></a><span class="default"></span>
<a name="312"><font size=-1>312     </font></a><span class="default">		</span><span class="comment">/** Scalar multiplication of x,y,z,yaw,pitch &amp; roll (angles will be wrapped to the ]-pi,pi] interval). */</span>
<a name="313"><font size=-1>313     </font></a><span class="comment">		</span><span class="keyword">void operator </span><span class="default">*=(</span><span class="keyword">const double </span><span class="default">s);</span>
<a name="314"><font size=-1>314     </font></a><span class="default"></span>
<a name="315"><font size=-1>315     </font></a><span class="default">		</span><span class="comment">/** Set the pose from a 3D position (meters) and yaw/pitch/roll angles (radians) - This method recomputes the internal rotation matrix.</span>
<a name="316"><font size=-1>316     </font></a><span class="comment">		  * \sa getYawPitchRoll, setYawPitchRoll</span>
<a name="317"><font size=-1>317     </font></a><span class="comment">		  */</span>
<a name="318"><font size=-1>318     </font></a><span class="comment">		</span><span class="keyword">void  <a href="dictionary_M.html#7060">setFromValues</a></span><span class="default">(</span>
<a name="319"><font size=-1>319     </font></a><span class="default">			</span><span class="keyword">const double		</span><span class="default">x0,</span>
<a name="320"><font size=-1>320     </font></a><span class="default">			</span><span class="keyword">const double		</span><span class="default">y0,</span>
<a name="321"><font size=-1>321     </font></a><span class="default">			</span><span class="keyword">const double		</span><span class="default">z0,</span>
<a name="322"><font size=-1>322     </font></a><span class="default">			</span><span class="keyword">const double		</span><span class="default">yaw=</span><span class="number">0</span><span class="default">,</span>
<a name="323"><font size=-1>323     </font></a><span class="default">			</span><span class="keyword">const double		</span><span class="default">pitch=</span><span class="number">0</span><span class="default">,</span>
<a name="324"><font size=-1>324     </font></a><span class="default">			</span><span class="keyword">const double		</span><span class="default">roll=</span><span class="number">0</span><span class="default">);</span>
<a name="325"><font size=-1>325     </font></a><span class="default"></span>
<a name="326"><font size=-1>326     </font></a><span class="default">		</span><span class="comment">/** Set the pose from a 3D position (meters) and a quaternion, stored as [x y z qr qx qy qz] in a 7-element vector.</span>
<a name="327"><font size=-1>327     </font></a><span class="comment">		  * \sa setFromValues, getYawPitchRoll, setYawPitchRoll, CQuaternion, getAsQuaternion</span>
<a name="328"><font size=-1>328     </font></a><span class="comment">		  */</span>
<a name="329"><font size=-1>329     </font></a><span class="comment">		</span><span class="keyword">template </span><span class="default">&lt;</span><span class="keyword">typename <a href="dictionary_V.html#7062">VECTORLIKE</a></span><span class="default">&gt;</span>
<a name="330"><font size=-1>330     </font></a><span class="default">		</span><span class="keyword">inline void  <a href="dictionary_M.html#7061">setFromXYZQ</a></span><span class="default">(</span>
<a name="331"><font size=-1>331     </font></a><span class="default">			</span><span class="keyword">const <a href="dictionary_V.html#7062">VECTORLIKE</a>    </span><span class="default">&amp;<a href="dictionary_V.html#7063">v</a>,</span>
<a name="332"><font size=-1>332     </font></a><span class="default">			</span><span class="keyword">const <a href="dictionary_S.html#56">size_t</a>        <a href="dictionary_I.html#7064">index_offset</a> </span><span class="default">= </span><span class="number">0</span><span class="default">)</span>
<a name="333"><font size=-1>333     </font></a><span class="default">		{</span>
<a name="334"><font size=-1>334     </font></a><span class="default">			<a href="dictionary_A.html#7065">ASSERT_ABOVEEQ_</a>(<a href="dictionary_V.html#7063">v</a>.<a href="dictionary_S.html#442">size</a>(), </span><span class="number">7</span><span class="default">+<a href="dictionary_I.html#7064">index_offset</a>)</span>
<a name="335"><font size=-1>335     </font></a><span class="default">			</span><span class="comment">// The 3x3 rotation part:</span>
<a name="336"><font size=-1>336     </font></a><span class="comment">			</span><span class="default">mrpt::math::<a href="dictionary_M.html#4494">CQuaternion</a>&lt;</span><span class="keyword">typename </span><span class="default">VECTORLIKE::value_type&gt; <a href="dictionary_Q.html#7143">q</a>( <a href="dictionary_V.html#7063">v</a>[<a href="dictionary_I.html#7064">index_offset</a>+</span><span class="number">3</span><span class="default">],<a href="dictionary_V.html#7063">v</a>[<a href="dictionary_I.html#7064">index_offset</a>+</span><span class="number">4</span><span class="default">],<a href="dictionary_V.html#7063">v</a>[<a href="dictionary_I.html#7064">index_offset</a>+</span><span class="number">5</span><span class="default">],<a href="dictionary_V.html#7063">v</a>[<a href="dictionary_I.html#7064">index_offset</a>+</span><span class="number">6</span><span class="default">] );</span>
<a name="337"><font size=-1>337     </font></a><span class="default">			<a href="dictionary_Q.html#7143">q</a>.<a href="dictionary_M.html#7144">rotationMatrixNoResize</a>(<a href="dictionary_M.html#6985">m_ROT</a>);</span>
<a name="338"><font size=-1>338     </font></a><span class="default">			<a href="dictionary_M.html#6986">m_ypr_uptodate</a>=</span><span class="keyword">false</span><span class="default">;</span>
<a name="339"><font size=-1>339     </font></a><span class="default">			<a href="dictionary_M.html#6984">m_coords</a>[</span><span class="number">0</span><span class="default">] = <a href="dictionary_V.html#7063">v</a>[<a href="dictionary_I.html#7064">index_offset</a>+</span><span class="number">0</span><span class="default">];</span>
<a name="340"><font size=-1>340     </font></a><span class="default">			<a href="dictionary_M.html#6984">m_coords</a>[</span><span class="number">1</span><span class="default">] = <a href="dictionary_V.html#7063">v</a>[<a href="dictionary_I.html#7064">index_offset</a>+</span><span class="number">1</span><span class="default">];</span>
<a name="341"><font size=-1>341     </font></a><span class="default">			<a href="dictionary_M.html#6984">m_coords</a>[</span><span class="number">2</span><span class="default">] = <a href="dictionary_V.html#7063">v</a>[<a href="dictionary_I.html#7064">index_offset</a>+</span><span class="number">2</span><span class="default">];</span>
<a name="342"><font size=-1>342     </font></a><span class="default">		}</span>
<a name="343"><font size=-1>343     </font></a><span class="default"></span>
<a name="344"><font size=-1>344     </font></a><span class="default">		</span><span class="comment">/** Set the 3 angles of the 3D pose (in radians) - This method recomputes the internal rotation coordinates matrix.</span>
<a name="345"><font size=-1>345     </font></a><span class="comment">		  * \sa getYawPitchRoll, setFromValues</span>
<a name="346"><font size=-1>346     </font></a><span class="comment">		  */</span>
<a name="347"><font size=-1>347     </font></a><span class="comment">		</span><span class="keyword">inline void  <a href="dictionary_M.html#7066">setYawPitchRoll</a></span><span class="default">(</span>
<a name="348"><font size=-1>348     </font></a><span class="default">			</span><span class="keyword">const double		<a href="dictionary_Y.html#7067">yaw_</a></span><span class="default">,</span>
<a name="349"><font size=-1>349     </font></a><span class="default">			</span><span class="keyword">const double		<a href="dictionary_P.html#7068">pitch_</a></span><span class="default">,</span>
<a name="350"><font size=-1>350     </font></a><span class="default">			</span><span class="keyword">const double		<a href="dictionary_R.html#7069">roll_</a></span><span class="default">)</span>
<a name="351"><font size=-1>351     </font></a><span class="default">		{</span>
<a name="352"><font size=-1>352     </font></a><span class="default">			<a href="dictionary_M.html#7060">setFromValues</a>(<a href="dictionary_M.html#2377">x</a>(),<a href="dictionary_M.html#2378">y</a>(),<a href="dictionary_Z.html#4504">z</a>(),<a href="dictionary_Y.html#7067">yaw_</a>,<a href="dictionary_P.html#7068">pitch_</a>,<a href="dictionary_R.html#7069">roll_</a>);</span>
<a name="353"><font size=-1>353     </font></a><span class="default">		}</span>
<a name="354"><font size=-1>354     </font></a><span class="default"></span>
<a name="355"><font size=-1>355     </font></a><span class="default">		</span><span class="comment">/** Set pose from an array with these 12 elements: [r11 r21 r31 r12 r22 r32 r13 r23 r33 tx ty tz]</span>
<a name="356"><font size=-1>356     </font></a><span class="comment">		  *  where r{ij} are the entries of the 3x3 rotation matrix and t{x,y,z} are the 3D translation of the pose</span>
<a name="357"><font size=-1>357     </font></a><span class="comment">		  *  \sa getAs12Vector</span>
<a name="358"><font size=-1>358     </font></a><span class="comment">		  */</span>
<a name="359"><font size=-1>359     </font></a><span class="comment">		</span><span class="keyword">template </span><span class="default">&lt;</span><span class="keyword">class <a href="dictionary_A.html#7071">ARRAYORVECTOR</a></span><span class="default">&gt;</span>
<a name="360"><font size=-1>360     </font></a><span class="default">		</span><span class="keyword">inline void <a href="dictionary_M.html#7070">setFrom12Vector</a></span><span class="default">(</span><span class="keyword">const <a href="dictionary_A.html#7071">ARRAYORVECTOR</a> </span><span class="default">&amp;<a href="dictionary_V.html#7072">vec12</a>)</span>
<a name="361"><font size=-1>361     </font></a><span class="default">		{</span>
<a name="362"><font size=-1>362     </font></a><span class="default">			<a href="dictionary_M.html#6985">m_ROT</a>.<a href="dictionary_M.html#701">set_unsafe</a>(</span><span class="number">0</span><span class="default">,</span><span class="number">0</span><span class="default">, <a href="dictionary_V.html#7072">vec12</a>[</span><span class="number">0</span><span class="default">]); <a href="dictionary_M.html#6985">m_ROT</a>.<a href="dictionary_M.html#701">set_unsafe</a>(</span><span class="number">0</span><span class="default">,</span><span class="number">1</span><span class="default">, <a href="dictionary_V.html#7072">vec12</a>[</span><span class="number">3</span><span class="default">]); <a href="dictionary_M.html#6985">m_ROT</a>.<a href="dictionary_M.html#701">set_unsafe</a>(</span><span class="number">0</span><span class="default">,</span><span class="number">2</span><span class="default">, <a href="dictionary_V.html#7072">vec12</a>[</span><span class="number">6</span><span class="default">]);</span>
<a name="363"><font size=-1>363     </font></a><span class="default">			<a href="dictionary_M.html#6985">m_ROT</a>.<a href="dictionary_M.html#701">set_unsafe</a>(</span><span class="number">1</span><span class="default">,</span><span class="number">0</span><span class="default">, <a href="dictionary_V.html#7072">vec12</a>[</span><span class="number">1</span><span class="default">]); <a href="dictionary_M.html#6985">m_ROT</a>.<a href="dictionary_M.html#701">set_unsafe</a>(</span><span class="number">1</span><span class="default">,</span><span class="number">1</span><span class="default">, <a href="dictionary_V.html#7072">vec12</a>[</span><span class="number">4</span><span class="default">]); <a href="dictionary_M.html#6985">m_ROT</a>.<a href="dictionary_M.html#701">set_unsafe</a>(</span><span class="number">1</span><span class="default">,</span><span class="number">2</span><span class="default">, <a href="dictionary_V.html#7072">vec12</a>[</span><span class="number">7</span><span class="default">]);</span>
<a name="364"><font size=-1>364     </font></a><span class="default">			<a href="dictionary_M.html#6985">m_ROT</a>.<a href="dictionary_M.html#701">set_unsafe</a>(</span><span class="number">2</span><span class="default">,</span><span class="number">0</span><span class="default">, <a href="dictionary_V.html#7072">vec12</a>[</span><span class="number">2</span><span class="default">]); <a href="dictionary_M.html#6985">m_ROT</a>.<a href="dictionary_M.html#701">set_unsafe</a>(</span><span class="number">2</span><span class="default">,</span><span class="number">1</span><span class="default">, <a href="dictionary_V.html#7072">vec12</a>[</span><span class="number">5</span><span class="default">]); <a href="dictionary_M.html#6985">m_ROT</a>.<a href="dictionary_M.html#701">set_unsafe</a>(</span><span class="number">2</span><span class="default">,</span><span class="number">2</span><span class="default">, <a href="dictionary_V.html#7072">vec12</a>[</span><span class="number">8</span><span class="default">]);</span>
<a name="365"><font size=-1>365     </font></a><span class="default">			<a href="dictionary_M.html#6986">m_ypr_uptodate</a> = </span><span class="keyword">false</span><span class="default">;</span>
<a name="366"><font size=-1>366     </font></a><span class="default">			<a href="dictionary_M.html#6984">m_coords</a>[</span><span class="number">0</span><span class="default">] = <a href="dictionary_V.html#7072">vec12</a>[ </span><span class="number">9</span><span class="default">];</span>
<a name="367"><font size=-1>367     </font></a><span class="default">			<a href="dictionary_M.html#6984">m_coords</a>[</span><span class="number">1</span><span class="default">] = <a href="dictionary_V.html#7072">vec12</a>[</span><span class="number">10</span><span class="default">];</span>
<a name="368"><font size=-1>368     </font></a><span class="default">			<a href="dictionary_M.html#6984">m_coords</a>[</span><span class="number">2</span><span class="default">] = <a href="dictionary_V.html#7072">vec12</a>[</span><span class="number">11</span><span class="default">];</span>
<a name="369"><font size=-1>369     </font></a><span class="default">		}</span>
<a name="370"><font size=-1>370     </font></a><span class="default"></span>
<a name="371"><font size=-1>371     </font></a><span class="default">		</span><span class="comment">/** Get the pose representation as an array with these 12 elements: [r11 r21 r31 r12 r22 r32 r13 r23 r33 tx ty tz]</span>
<a name="372"><font size=-1>372     </font></a><span class="comment">		  *  where r{ij} are the entries of the 3x3 rotation matrix and t{x,y,z} are the 3D translation of the pose</span>
<a name="373"><font size=-1>373     </font></a><span class="comment">		  *  \sa setFrom12Vector</span>
<a name="374"><font size=-1>374     </font></a><span class="comment">		  */</span>
<a name="375"><font size=-1>375     </font></a><span class="comment">		</span><span class="keyword">template </span><span class="default">&lt;</span><span class="keyword">class <a href="dictionary_A.html#7074">ARRAYORVECTOR</a></span><span class="default">&gt;</span>
<a name="376"><font size=-1>376     </font></a><span class="default">		</span><span class="keyword">inline void <a href="dictionary_M.html#7073">getAs12Vector</a></span><span class="default">(<a href="dictionary_A.html#7074">ARRAYORVECTOR</a> &amp;<a href="dictionary_V.html#7075">vec12</a>) </span><span class="keyword">const</span>
<a name="377"><font size=-1>377     </font></a><span class="keyword">		</span><span class="default">{</span>
<a name="378"><font size=-1>378     </font></a><span class="default">			<a href="dictionary_V.html#7075">vec12</a>[</span><span class="number">0</span><span class="default">] = <a href="dictionary_M.html#6985">m_ROT</a>.<a href="dictionary_M.html#708">get_unsafe</a>(</span><span class="number">0</span><span class="default">,</span><span class="number">0</span><span class="default">); <a href="dictionary_V.html#7075">vec12</a>[</span><span class="number">3</span><span class="default">] = <a href="dictionary_M.html#6985">m_ROT</a>.<a href="dictionary_M.html#708">get_unsafe</a>(</span><span class="number">0</span><span class="default">,</span><span class="number">1</span><span class="default">); <a href="dictionary_V.html#7075">vec12</a>[</span><span class="number">6</span><span class="default">] = <a href="dictionary_M.html#6985">m_ROT</a>.<a href="dictionary_M.html#708">get_unsafe</a>(</span><span class="number">0</span><span class="default">,</span><span class="number">2</span><span class="default">);</span>
<a name="379"><font size=-1>379     </font></a><span class="default">			<a href="dictionary_V.html#7075">vec12</a>[</span><span class="number">1</span><span class="default">] = <a href="dictionary_M.html#6985">m_ROT</a>.<a href="dictionary_M.html#708">get_unsafe</a>(</span><span class="number">1</span><span class="default">,</span><span class="number">0</span><span class="default">); <a href="dictionary_V.html#7075">vec12</a>[</span><span class="number">4</span><span class="default">] = <a href="dictionary_M.html#6985">m_ROT</a>.<a href="dictionary_M.html#708">get_unsafe</a>(</span><span class="number">1</span><span class="default">,</span><span class="number">1</span><span class="default">); <a href="dictionary_V.html#7075">vec12</a>[</span><span class="number">7</span><span class="default">] = <a href="dictionary_M.html#6985">m_ROT</a>.<a href="dictionary_M.html#708">get_unsafe</a>(</span><span class="number">1</span><span class="default">,</span><span class="number">2</span><span class="default">);</span>
<a name="380"><font size=-1>380     </font></a><span class="default">			<a href="dictionary_V.html#7075">vec12</a>[</span><span class="number">2</span><span class="default">] = <a href="dictionary_M.html#6985">m_ROT</a>.<a href="dictionary_M.html#708">get_unsafe</a>(</span><span class="number">2</span><span class="default">,</span><span class="number">0</span><span class="default">); <a href="dictionary_V.html#7075">vec12</a>[</span><span class="number">5</span><span class="default">] = <a href="dictionary_M.html#6985">m_ROT</a>.<a href="dictionary_M.html#708">get_unsafe</a>(</span><span class="number">2</span><span class="default">,</span><span class="number">1</span><span class="default">); <a href="dictionary_V.html#7075">vec12</a>[</span><span class="number">8</span><span class="default">] = <a href="dictionary_M.html#6985">m_ROT</a>.<a href="dictionary_M.html#708">get_unsafe</a>(</span><span class="number">2</span><span class="default">,</span><span class="number">2</span><span class="default">);</span>
<a name="381"><font size=-1>381     </font></a><span class="default">			<a href="dictionary_V.html#7075">vec12</a>[ </span><span class="number">9</span><span class="default">] = <a href="dictionary_M.html#6984">m_coords</a>[</span><span class="number">0</span><span class="default">];</span>
<a name="382"><font size=-1>382     </font></a><span class="default">			<a href="dictionary_V.html#7075">vec12</a>[</span><span class="number">10</span><span class="default">] = <a href="dictionary_M.html#6984">m_coords</a>[</span><span class="number">1</span><span class="default">];</span>
<a name="383"><font size=-1>383     </font></a><span class="default">			<a href="dictionary_V.html#7075">vec12</a>[</span><span class="number">11</span><span class="default">] = <a href="dictionary_M.html#6984">m_coords</a>[</span><span class="number">2</span><span class="default">];</span>
<a name="384"><font size=-1>384     </font></a><span class="default">		}</span>
<a name="385"><font size=-1>385     </font></a><span class="default"></span>
<a name="386"><font size=-1>386     </font></a><span class="default">		</span><span class="comment">/** Returns the three angles (yaw, pitch, roll), in radians, from the rotation matrix.</span>
<a name="387"><font size=-1>387     </font></a><span class="comment">		  * \sa setFromValues, yaw, pitch, roll</span>
<a name="388"><font size=-1>388     </font></a><span class="comment">		  */</span>
<a name="389"><font size=-1>389     </font></a><span class="comment">		</span><span class="keyword">void  <a href="dictionary_M.html#7076">getYawPitchRoll</a></span><span class="default">( </span><span class="keyword">double </span><span class="default">&amp;yaw, </span><span class="keyword">double </span><span class="default">&amp;pitch, </span><span class="keyword">double </span><span class="default">&amp;roll ) </span><span class="keyword">const</span><span class="default">;</span>
<a name="390"><font size=-1>390     </font></a><span class="default"></span>
<a name="391"><font size=-1>391     </font></a><span class="default">		</span><span class="keyword">inline double <a href="dictionary_M.html#7077">yaw</a></span><span class="default">() </span><span class="keyword">const </span><span class="default">{ <a href="dictionary_M.html#6991">updateYawPitchRoll</a>(); </span><span class="keyword">return <a href="dictionary_M.html#6987">m_yaw</a></span><span class="default">; }  </span><span class="comment">//!&lt; Get the YAW angle (in radians)  \sa setFromValues</span>
<a name="392"><font size=-1>392     </font></a><span class="comment">		</span><span class="keyword">inline double <a href="dictionary_M.html#7078">pitch</a></span><span class="default">() </span><span class="keyword">const </span><span class="default">{ <a href="dictionary_M.html#6991">updateYawPitchRoll</a>(); </span><span class="keyword">return <a href="dictionary_M.html#6988">m_pitch</a></span><span class="default">; }  </span><span class="comment">//!&lt; Get the PITCH angle (in radians) \sa setFromValues</span>
<a name="393"><font size=-1>393     </font></a><span class="comment">		</span><span class="keyword">inline double <a href="dictionary_M.html#7079">roll</a></span><span class="default">() </span><span class="keyword">const </span><span class="default">{ <a href="dictionary_M.html#6991">updateYawPitchRoll</a>(); </span><span class="keyword">return <a href="dictionary_M.html#6989">m_roll</a></span><span class="default">; }  </span><span class="comment">//!&lt; Get the ROLL angle (in radians) \sa setFromValues</span>
<a name="394"><font size=-1>394     </font></a><span class="comment"></span>
<a name="395"><font size=-1>395     </font></a><span class="comment">		/** Returns a 1x6 vector with [x y z yaw pitch roll] */</span>
<a name="396"><font size=-1>396     </font></a><span class="comment">		</span><span class="keyword">void <a href="dictionary_M.html#7080">getAsVector</a></span><span class="default">(mrpt::math::<a href="dictionary_M.html#1397">CVectorDouble</a> &amp;v) </span><span class="keyword">const</span><span class="default">;</span>
<a name="397"><font size=-1>397     </font></a><span class="default">		</span><span class="comment">/// \overload</span>
<a name="398"><font size=-1>398     </font></a><span class="comment">		</span><span class="keyword">void <a href="dictionary_M.html#7081">getAsVector</a></span><span class="default">(mrpt::math::<a href="dictionary_M.html#563">CArrayDouble</a>&lt;</span><span class="number">6</span><span class="default">&gt; &amp;v) </span><span class="keyword">const</span><span class="default">;</span>
<a name="399"><font size=-1>399     </font></a><span class="default"></span>
<a name="400"><font size=-1>400     </font></a><span class="default">		</span><span class="comment">/** Returns the quaternion associated to the rotation of this object (NOTE: XYZ translation is ignored)</span>
<a name="401"><font size=-1>401     </font></a><span class="comment">		  * \f[ \mathbf{q} = \left( \begin{array}{c} \cos (\phi /2) \cos (\theta /2) \cos (\psi /2) +  \sin (\phi /2) \sin (\theta /2) \sin (\psi /2) \\ \sin (\phi /2) \cos (\theta /2) \cos (\psi /2) -  \cos (\phi /2) \sin (\theta /2) \sin (\psi /2) \\ \cos (\phi /2) \sin (\theta /2) \cos (\psi /2) +  \sin (\phi /2) \cos (\theta /2) \sin (\psi /2) \\ \cos (\phi /2) \cos (\theta /2) \sin (\psi /2) -  \sin (\phi /2) \sin (\theta /2) \cos (\psi /2) \\ \end{array}\right) \f]</span>
<a name="402"><font size=-1>402     </font></a><span class="comment">		  * With : \f$ \phi = roll \f$,  \f$ \theta = pitch \f$ and \f$ \psi = yaw \f$.</span>
<a name="403"><font size=-1>403     </font></a><span class="comment">		  * \param out_dq_dr  If provided, the 4x3 Jacobian of the transformation will be computed and stored here. It's the Jacobian of the transformation from (yaw pitch roll) to (qr qx qy qz).</span>
<a name="404"><font size=-1>404     </font></a><span class="comment">		  */</span>
<a name="405"><font size=-1>405     </font></a><span class="comment">		</span><span class="keyword">void <a href="dictionary_M.html#7082">getAsQuaternion</a></span><span class="default">(</span>
<a name="406"><font size=-1>406     </font></a><span class="default">			mrpt::math::<a href="dictionary_M.html#585">CQuaternionDouble</a> &amp;q,</span>
<a name="407"><font size=-1>407     </font></a><span class="default">			mrpt::math::<a href="dictionary_M.html#605">CMatrixFixedNumeric</a>&lt;</span><span class="keyword">double</span><span class="default">,</span><span class="number">4</span><span class="default">,</span><span class="number">3</span><span class="default">&gt;   *out_dq_dr = NULL</span>
<a name="408"><font size=-1>408     </font></a><span class="default">			) </span><span class="keyword">const</span><span class="default">;</span>
<a name="409"><font size=-1>409     </font></a><span class="default"></span>
<a name="410"><font size=-1>410     </font></a><span class="default">		</span><span class="keyword">inline const double </span><span class="default">&amp;</span><span class="keyword">operator</span><span class="default">[](</span><span class="keyword">unsigned int <a href="dictionary_I.html#7084">i</a></span><span class="default">) </span><span class="keyword">const</span>
<a name="411"><font size=-1>411     </font></a><span class="keyword">		</span><span class="default">{</span>
<a name="412"><font size=-1>412     </font></a><span class="default">			<a href="dictionary_M.html#6991">updateYawPitchRoll</a>();</span>
<a name="413"><font size=-1>413     </font></a><span class="default">			</span><span class="keyword">switch</span><span class="default">(<a href="dictionary_I.html#7084">i</a>)</span>
<a name="414"><font size=-1>414     </font></a><span class="default">			{</span>
<a name="415"><font size=-1>415     </font></a><span class="default">				</span><span class="keyword">case </span><span class="number">0</span><span class="default">:</span><span class="keyword">return <a href="dictionary_M.html#6984">m_coords</a></span><span class="default">[</span><span class="number">0</span><span class="default">];</span>
<a name="416"><font size=-1>416     </font></a><span class="default">				</span><span class="keyword">case </span><span class="number">1</span><span class="default">:</span><span class="keyword">return <a href="dictionary_M.html#6984">m_coords</a></span><span class="default">[</span><span class="number">1</span><span class="default">];</span>
<a name="417"><font size=-1>417     </font></a><span class="default">				</span><span class="keyword">case </span><span class="number">2</span><span class="default">:</span><span class="keyword">return <a href="dictionary_M.html#6984">m_coords</a></span><span class="default">[</span><span class="number">2</span><span class="default">];</span>
<a name="418"><font size=-1>418     </font></a><span class="default">				</span><span class="keyword">case </span><span class="number">3</span><span class="default">:</span><span class="keyword">return <a href="dictionary_M.html#6987">m_yaw</a></span><span class="default">;</span>
<a name="419"><font size=-1>419     </font></a><span class="default">				</span><span class="keyword">case </span><span class="number">4</span><span class="default">:</span><span class="keyword">return <a href="dictionary_M.html#6988">m_pitch</a></span><span class="default">;</span>
<a name="420"><font size=-1>420     </font></a><span class="default">				</span><span class="keyword">case </span><span class="number">5</span><span class="default">:</span><span class="keyword">return <a href="dictionary_M.html#6989">m_roll</a></span><span class="default">;</span>
<a name="421"><font size=-1>421     </font></a><span class="default">		 		</span><span class="keyword">default</span><span class="default">:</span>
<a name="422"><font size=-1>422     </font></a><span class="default">				</span><span class="keyword">throw </span><span class="default">std::<a href="dictionary_S.html#713">runtime_error</a>(</span><span class="string">&quot;CPose3D::operator[]: Index of bounds.&quot;</span><span class="default">);</span>
<a name="423"><font size=-1>423     </font></a><span class="default">			}</span>
<a name="424"><font size=-1>424     </font></a><span class="default">		}</span>
<a name="425"><font size=-1>425     </font></a><span class="default">		</span><span class="comment">// CPose3D CANNOT have a write [] operator, since it'd leave the object in an inconsistent state (outdated rotation matrix).</span>
<a name="426"><font size=-1>426     </font></a><span class="comment">		// Use setFromValues() instead.</span>
<a name="427"><font size=-1>427     </font></a><span class="comment">		// inline double &amp;operator[](unsigned int i)</span>
<a name="428"><font size=-1>428     </font></a><span class="comment"></span>
<a name="429"><font size=-1>429     </font></a><span class="comment">		/** Returns a human-readable textual representation of the object (eg: &quot;[x y z yaw pitch roll]&quot;, angles in degrees.)</span>
<a name="430"><font size=-1>430     </font></a><span class="comment">		  * \sa fromString</span>
<a name="431"><font size=-1>431     </font></a><span class="comment">		  */</span>
<a name="432"><font size=-1>432     </font></a><span class="comment">		</span><span class="keyword">void <a href="dictionary_M.html#7085">asString</a></span><span class="default">(std::<a href="dictionary_S.html#118">string</a> &amp;<a href="dictionary_S.html#7086">s</a>) </span><span class="keyword">const </span><span class="default">{ </span><span class="keyword">using </span><span class="default">mrpt::utils::<a href="dictionary_R.html#6864">RAD2DEG</a>; <a href="dictionary_M.html#6991">updateYawPitchRoll</a>(); <a href="dictionary_S.html#7086">s</a> = mrpt::<a href="dictionary_M.html#148">format</a>(</span><span class="string">&quot;[%f %f %f %f %f %f]&quot;</span><span class="default">,<a href="dictionary_M.html#6984">m_coords</a>[</span><span class="number">0</span><span class="default">],<a href="dictionary_M.html#6984">m_coords</a>[</span><span class="number">1</span><span class="default">],<a href="dictionary_M.html#6984">m_coords</a>[</span><span class="number">2</span><span class="default">],<a href="dictionary_R.html#7145">RAD2DEG</a>(<a href="dictionary_M.html#6987">m_yaw</a>),<a href="dictionary_R.html#7145">RAD2DEG</a>(<a href="dictionary_M.html#6988">m_pitch</a>),<a href="dictionary_R.html#7145">RAD2DEG</a>(<a href="dictionary_M.html#6989">m_roll</a>)); }</span>
<a name="433"><font size=-1>433     </font></a><span class="default">		</span><span class="keyword">inline </span><span class="default">std::<a href="dictionary_S.html#118">string</a> <a href="dictionary_M.html#7087">asString</a>() </span><span class="keyword">const </span><span class="default">{ std::<a href="dictionary_S.html#118">string</a> <a href="dictionary_S.html#714">s</a>; <a href="dictionary_M.html#7085">asString</a>(<a href="dictionary_S.html#714">s</a>); </span><span class="keyword">return <a href="dictionary_S.html#714">s</a></span><span class="default">; }</span>
<a name="434"><font size=-1>434     </font></a><span class="default"></span>
<a name="435"><font size=-1>435     </font></a><span class="default">		</span><span class="comment">/** Set the current object value from a string generated by 'asString' (eg: &quot;[x y z yaw pitch roll]&quot;, angles in deg. )</span>
<a name="436"><font size=-1>436     </font></a><span class="comment">		  * \sa asString</span>
<a name="437"><font size=-1>437     </font></a><span class="comment">		  * \exception std::exception On invalid format</span>
<a name="438"><font size=-1>438     </font></a><span class="comment">		  */</span>
<a name="439"><font size=-1>439     </font></a><span class="comment">		</span><span class="keyword">void <a href="dictionary_M.html#7088">fromString</a></span><span class="default">(</span><span class="keyword">const </span><span class="default">std::<a href="dictionary_S.html#118">string</a> &amp;<a href="dictionary_S.html#7089">s</a>) {</span>
<a name="440"><font size=-1>440     </font></a><span class="default">			</span><span class="keyword">using </span><span class="default">mrpt::utils::<a href="dictionary_D.html#6863">DEG2RAD</a>;</span>
<a name="441"><font size=-1>441     </font></a><span class="default">		 	mrpt::math::<a href="dictionary_M.html#206">CMatrixDouble</a>  <a href="dictionary_M.html#7146">m</a>;</span>
<a name="442"><font size=-1>442     </font></a><span class="default">		 	</span><span class="keyword">if </span><span class="default">(!<a href="dictionary_M.html#7146">m</a>.<a href="dictionary_M.html#716">fromMatlabStringFormat</a>(<a href="dictionary_S.html#7089">s</a>)) <a href="dictionary_T.html#660">THROW_EXCEPTION</a>(</span><span class="string">&quot;Malformed expression in ::fromString&quot;</span><span class="default">);</span>
<a name="443"><font size=-1>443     </font></a><span class="default">			<a href="dictionary_A.html#662">ASSERTMSG_</a>(mrpt::math::<a href="dictionary_S.html#442">size</a>(<a href="dictionary_M.html#661">m</a>,</span><span class="number">1</span><span class="default">)==</span><span class="number">1 </span><span class="default">&amp;&amp; mrpt::math::size(m,</span><span class="number">2</span><span class="default">)==</span><span class="number">6</span><span class="default">, </span><span class="string">&quot;Wrong size of vector in ::fromString&quot;</span><span class="default">);</span>
<a name="444"><font size=-1>444     </font></a><span class="default">		 	</span><span class="keyword">this</span><span class="default">-&gt;<a href="dictionary_M.html#7060">setFromValues</a>(<a href="dictionary_M.html#7146">m</a>.<a href="dictionary_M.html#718">get_unsafe</a>(</span><span class="number">0</span><span class="default">,</span><span class="number">0</span><span class="default">),<a href="dictionary_M.html#7146">m</a>.<a href="dictionary_M.html#718">get_unsafe</a>(</span><span class="number">0</span><span class="default">,</span><span class="number">1</span><span class="default">),<a href="dictionary_M.html#7146">m</a>.<a href="dictionary_M.html#718">get_unsafe</a>(</span><span class="number">0</span><span class="default">,</span><span class="number">2</span><span class="default">),<a href="dictionary_D.html#7147">DEG2RAD</a>(<a href="dictionary_M.html#7146">m</a>.<a href="dictionary_M.html#718">get_unsafe</a>(</span><span class="number">0</span><span class="default">,</span><span class="number">3</span><span class="default">)),<a href="dictionary_D.html#7147">DEG2RAD</a>(<a href="dictionary_M.html#7146">m</a>.<a href="dictionary_M.html#718">get_unsafe</a>(</span><span class="number">0</span><span class="default">,</span><span class="number">4</span><span class="default">)),<a href="dictionary_D.html#7147">DEG2RAD</a>(<a href="dictionary_M.html#7146">m</a>.<a href="dictionary_M.html#718">get_unsafe</a>(</span><span class="number">0</span><span class="default">,</span><span class="number">5</span><span class="default">)));</span>
<a name="445"><font size=-1>445     </font></a><span class="default">		 }</span>
<a name="446"><font size=-1>446     </font></a><span class="default"></span>
<a name="447"><font size=-1>447     </font></a><span class="default">		</span><span class="comment">/** Return true if the 6D pose represents a Z axis almost exactly vertical (upwards or downwards), with a given tolerance (if set to 0 exact horizontality is tested). */</span>
<a name="448"><font size=-1>448     </font></a><span class="comment">		</span><span class="keyword">bool <a href="dictionary_M.html#7090">isHorizontal</a></span><span class="default">( </span><span class="keyword">const double </span><span class="default">tolerance=</span><span class="number">0</span><span class="default">) </span><span class="keyword">const</span><span class="default">;</span>
<a name="449"><font size=-1>449     </font></a><span class="default"></span>
<a name="450"><font size=-1>450     </font></a><span class="default">		</span><span class="comment">/** The euclidean distance between two poses taken as two 6-length vectors (angles in radians). */</span>
<a name="451"><font size=-1>451     </font></a><span class="comment">		</span><span class="keyword">double <a href="dictionary_M.html#7091">distanceEuclidean6D</a></span><span class="default">( </span><span class="keyword">const <a href="dictionary_M.html#182">CPose3D</a> </span><span class="default">&amp;o ) </span><span class="keyword">const</span><span class="default">;</span>
<a name="452"><font size=-1>452     </font></a><span class="default"></span>
<a name="453"><font size=-1>453     </font></a><span class="default">		</span><span class="comment">/** @} */  // modif. components</span>
<a name="454"><font size=-1>454     </font></a><span class="comment"></span>
<a name="455"><font size=-1>455     </font></a><span class="comment"></span>
<a name="456"><font size=-1>456     </font></a><span class="comment"></span>
<a name="457"><font size=-1>457     </font></a><span class="comment">		/** @name Lie Algebra methods</span>
<a name="458"><font size=-1>458     </font></a><span class="comment">		    @{ */</span>
<a name="459"><font size=-1>459     </font></a><span class="comment"></span>
<a name="460"><font size=-1>460     </font></a><span class="comment">		/** Exponentiate a Vector in the SE(3) Lie Algebra to generate a new CPose3D (static method).</span>
<a name="461"><font size=-1>461     </font></a><span class="comment">		  * \param pseudo_exponential If set to true, XYZ are copied from the first three elements in the vector instead of using the proper Lie Algebra formulas (this is actually the common practice in robotics literature).</span>
<a name="462"><font size=-1>462     </font></a><span class="comment">		  * \note Method from TooN (C) Tom Drummond (GNU GPL) */</span>
<a name="463"><font size=-1>463     </font></a><span class="comment">		</span><span class="keyword">static <a href="dictionary_M.html#182">CPose3D</a> <a href="dictionary_M.html#7092">exp</a></span><span class="default">(</span><span class="keyword">const </span><span class="default">mrpt::math::<a href="dictionary_M.html#7093">CArrayNumeric</a>&lt;</span><span class="keyword">double</span><span class="default">,</span><span class="number">6</span><span class="default">&gt; &amp; vect, </span><span class="keyword">bool </span><span class="default">pseudo_exponential = </span><span class="keyword">false</span><span class="default">);</span>
<a name="464"><font size=-1>464     </font></a><span class="default"></span>
<a name="465"><font size=-1>465     </font></a><span class="default">		</span><span class="comment">/** \overload */</span>
<a name="466"><font size=-1>466     </font></a><span class="comment">		</span><span class="keyword">static void <a href="dictionary_M.html#7094">exp</a></span><span class="default">(</span><span class="keyword">const </span><span class="default">mrpt::math::<a href="dictionary_M.html#7093">CArrayNumeric</a>&lt;</span><span class="keyword">double</span><span class="default">,</span><span class="number">6</span><span class="default">&gt; &amp; vect, <a href="dictionary_M.html#182">CPose3D</a> &amp;out_pose, </span><span class="keyword">bool </span><span class="default">pseudo_exponential = </span><span class="keyword">false</span><span class="default">);</span>
<a name="467"><font size=-1>467     </font></a><span class="default"></span>
<a name="468"><font size=-1>468     </font></a><span class="default">		</span><span class="comment">/** Exponentiate a vector in the Lie algebra to generate a new SO(3) (a 3x3 rotation matrix).</span>
<a name="469"><font size=-1>469     </font></a><span class="comment">		  * \note Method from TooN (C) Tom Drummond (GNU GPL) */</span>
<a name="470"><font size=-1>470     </font></a><span class="comment">		</span><span class="keyword">static </span><span class="default">mrpt::math::<a href="dictionary_M.html#176">CMatrixDouble33</a> <a href="dictionary_M.html#7095">exp_rotation</a>(</span><span class="keyword">const </span><span class="default">mrpt::math::<a href="dictionary_M.html#7093">CArrayNumeric</a>&lt;</span><span class="keyword">double</span><span class="default">,</span><span class="number">3</span><span class="default">&gt; &amp; vect);</span>
<a name="471"><font size=-1>471     </font></a><span class="default"></span>
<a name="472"><font size=-1>472     </font></a><span class="default"></span>
<a name="473"><font size=-1>473     </font></a><span class="default">		</span><span class="comment">/** Take the logarithm of the 3x4 matrix defined by this pose, generating the corresponding vector in the SE(3) Lie Algebra.</span>
<a name="474"><font size=-1>474     </font></a><span class="comment">		  * \note Method from TooN (C) Tom Drummond (GNU GPL)</span>
<a name="475"><font size=-1>475     </font></a><span class="comment">		  * \sa ln_jacob</span>
<a name="476"><font size=-1>476     </font></a><span class="comment">		  */</span>
<a name="477"><font size=-1>477     </font></a><span class="comment">		</span><span class="keyword">void <a href="dictionary_M.html#7096">ln</a></span><span class="default">(mrpt::math::<a href="dictionary_M.html#563">CArrayDouble</a>&lt;</span><span class="number">6</span><span class="default">&gt; &amp;out_ln) </span><span class="keyword">const</span><span class="default">;</span>
<a name="478"><font size=-1>478     </font></a><span class="default"></span>
<a name="479"><font size=-1>479     </font></a><span class="default">		</span><span class="comment">/// \overload</span>
<a name="480"><font size=-1>480     </font></a><span class="comment">		</span><span class="keyword">inline </span><span class="default">mrpt::math::<a href="dictionary_M.html#563">CArrayDouble</a>&lt;</span><span class="number">6</span><span class="default">&gt; <a href="dictionary_M.html#7097">ln</a>() </span><span class="keyword">const </span><span class="default">{ mrpt::math::<a href="dictionary_M.html#699">CArrayDouble</a>&lt;</span><span class="number">6</span><span class="default">&gt; <a href="dictionary_R.html#7148">ret</a>; <a href="dictionary_M.html#7096">ln</a>(<a href="dictionary_R.html#7148">ret</a>); </span><span class="keyword">return <a href="dictionary_R.html#7148">ret</a></span><span class="default">; }</span>
<a name="481"><font size=-1>481     </font></a><span class="default"></span>
<a name="482"><font size=-1>482     </font></a><span class="default">		</span><span class="comment">/** Jacobian of the logarithm of the 3x4 matrix defined by this pose.</span>
<a name="483"><font size=-1>483     </font></a><span class="comment">		  * \note Method from TooN (C) Tom Drummond (GNU GPL)</span>
<a name="484"><font size=-1>484     </font></a><span class="comment">		  * \sa ln</span>
<a name="485"><font size=-1>485     </font></a><span class="comment">		  */</span>
<a name="486"><font size=-1>486     </font></a><span class="comment">		</span><span class="keyword">void <a href="dictionary_M.html#7098">ln_jacob</a></span><span class="default">(mrpt::math::<a href="dictionary_M.html#605">CMatrixFixedNumeric</a>&lt;</span><span class="keyword">double</span><span class="default">,</span><span class="number">6</span><span class="default">,</span><span class="number">12</span><span class="default">&gt; &amp;J) </span><span class="keyword">const</span><span class="default">;</span>
<a name="487"><font size=-1>487     </font></a><span class="default"></span>
<a name="488"><font size=-1>488     </font></a><span class="default">		</span><span class="comment">/** Static function to compute the Jacobian of the SO(3) Logarithm function, evaluated at a given 3x3 rotation matrix R.</span>
<a name="489"><font size=-1>489     </font></a><span class="comment">		  * \sa ln, ln_jacob</span>
<a name="490"><font size=-1>490     </font></a><span class="comment">		  */</span>
<a name="491"><font size=-1>491     </font></a><span class="comment">		</span><span class="keyword">static void <a href="dictionary_M.html#7099">ln_rot_jacob</a></span><span class="default">(</span><span class="keyword">const </span><span class="default">mrpt::math::<a href="dictionary_M.html#176">CMatrixDouble33</a> &amp;R, mrpt::math::<a href="dictionary_M.html#605">CMatrixFixedNumeric</a>&lt;</span><span class="keyword">double</span><span class="default">,</span><span class="number">3</span><span class="default">,</span><span class="number">9</span><span class="default">&gt; &amp;M);</span>
<a name="492"><font size=-1>492     </font></a><span class="default"></span>
<a name="493"><font size=-1>493     </font></a><span class="default">		</span><span class="comment">/** Take the logarithm of the 3x3 rotation matrix, generating the corresponding vector in the Lie Algebra.</span>
<a name="494"><font size=-1>494     </font></a><span class="comment">		  * \note Method from TooN (C) Tom Drummond (GNU GPL) */</span>
<a name="495"><font size=-1>495     </font></a><span class="comment">		</span><span class="default">mrpt::math::<a href="dictionary_M.html#563">CArrayDouble</a>&lt;</span><span class="number">3</span><span class="default">&gt; <a href="dictionary_M.html#7100">ln_rotation</a>() </span><span class="keyword">const</span><span class="default">;</span>
<a name="496"><font size=-1>496     </font></a><span class="default"></span>
<a name="497"><font size=-1>497     </font></a><span class="default">		</span><span class="comment">/** The Jacobian d (e^eps * D) / d eps , with eps=increment in Lie Algebra.</span>
<a name="498"><font size=-1>498     </font></a><span class="comment">		  * \note Eq. 10.3.5 in tech report http://ingmec.ual.es/~jlblanco/papers/jlblanco2010geometry3D_techrep.pdf */</span>
<a name="499"><font size=-1>499     </font></a><span class="comment">		</span><span class="keyword">static void <a href="dictionary_M.html#7101">jacob_dexpeD_de</a></span><span class="default">(</span><span class="keyword">const <a href="dictionary_M.html#182">CPose3D</a> </span><span class="default">&amp;D, Eigen::<a href="dictionary_E.html#1671">Matrix</a>&lt;</span><span class="keyword">double</span><span class="default">,</span><span class="number">12</span><span class="default">,</span><span class="number">6</span><span class="default">&gt; &amp; jacob);</span>
<a name="500"><font size=-1>500     </font></a><span class="default"></span>
<a name="501"><font size=-1>501     </font></a><span class="default">		</span><span class="comment">/** The Jacobian d (A * e^eps * D) / d eps , with eps=increment in Lie Algebra.</span>
<a name="502"><font size=-1>502     </font></a><span class="comment">		  * \note Eq. 10.3.7 in tech report http://ingmec.ual.es/~jlblanco/papers/jlblanco2010geometry3D_techrep.pdf */</span>
<a name="503"><font size=-1>503     </font></a><span class="comment">		</span><span class="keyword">static void <a href="dictionary_M.html#7102">jacob_dAexpeD_de</a></span><span class="default">(</span><span class="keyword">const <a href="dictionary_M.html#182">CPose3D</a> </span><span class="default">&amp;A, </span><span class="keyword">const <a href="dictionary_M.html#182">CPose3D</a> </span><span class="default">&amp;D, Eigen::<a href="dictionary_E.html#1671">Matrix</a>&lt;</span><span class="keyword">double</span><span class="default">,</span><span class="number">12</span><span class="default">,</span><span class="number">6</span><span class="default">&gt; &amp; jacob);</span>
<a name="504"><font size=-1>504     </font></a><span class="default"></span>
<a name="505"><font size=-1>505     </font></a><span class="default">		</span><span class="comment">/** @} */</span>
<a name="506"><font size=-1>506     </font></a><span class="comment"></span>
<a name="507"><font size=-1>507     </font></a><span class="comment">		</span><span class="keyword">void <a href="dictionary_M.html#7103">setToNaN</a></span><span class="default">() <a href="dictionary_M.html#422">MRPT_OVERRIDE</a>;</span>
<a name="508"><font size=-1>508     </font></a><span class="default"></span>
<a name="509"><font size=-1>509     </font></a><span class="default">		</span><span class="keyword">typedef <a href="dictionary_M.html#182">CPose3D</a>  <a href="dictionary_M.html#7104">type_value</a></span><span class="default">; </span><span class="comment">//!&lt; Used to emulate CPosePDF types, for example, in mrpt::graphs::CNetworkOfPoses</span>
<a name="510"><font size=-1>510     </font></a><span class="comment">		</span><span class="keyword">enum </span><span class="default">{ is_3D_val = </span><span class="number">1 </span><span class="default">};</span>
<a name="511"><font size=-1>511     </font></a><span class="default">		</span><span class="keyword">static inline bool <a href="dictionary_M.html#7107">is_3D</a></span><span class="default">() { </span><span class="keyword">return </span><span class="default">is_3D_val!=</span><span class="number">0</span><span class="default">; }</span>
<a name="512"><font size=-1>512     </font></a><span class="default">		</span><span class="keyword">enum </span><span class="default">{ rotation_dimensions = </span><span class="number">3 </span><span class="default">};</span>
<a name="513"><font size=-1>513     </font></a><span class="default">		</span><span class="keyword">enum </span><span class="default">{ is_PDF_val = </span><span class="number">0 </span><span class="default">};</span>
<a name="514"><font size=-1>514     </font></a><span class="default">		</span><span class="keyword">static inline bool <a href="dictionary_M.html#7112">is_PDF</a></span><span class="default">() { </span><span class="keyword">return </span><span class="default">is_PDF_val!=</span><span class="number">0</span><span class="default">; }</span>
<a name="515"><font size=-1>515     </font></a><span class="default"></span>
<a name="516"><font size=-1>516     </font></a><span class="default">		</span><span class="keyword">inline const <a href="dictionary_M.html#7104">type_value</a> </span><span class="default">&amp; <a href="dictionary_M.html#7113">getPoseMean</a>() </span><span class="keyword">const </span><span class="default">{ </span><span class="keyword">return </span><span class="default">*</span><span class="keyword">this</span><span class="default">; }</span>
<a name="517"><font size=-1>517     </font></a><span class="default">		</span><span class="keyword">inline       <a href="dictionary_M.html#7104">type_value</a> </span><span class="default">&amp; <a href="dictionary_M.html#7114">getPoseMean</a>()       { </span><span class="keyword">return </span><span class="default">*</span><span class="keyword">this</span><span class="default">; }</span>
<a name="518"><font size=-1>518     </font></a><span class="default"></span>
<a name="519"><font size=-1>519     </font></a><span class="default">		</span><span class="comment">/** @name STL-like methods and typedefs</span>
<a name="520"><font size=-1>520     </font></a><span class="comment">		   @{   */</span>
<a name="521"><font size=-1>521     </font></a><span class="comment">		</span><span class="keyword">typedef double         <a href="dictionary_M.html#7115">value_type</a></span><span class="default">;		</span><span class="comment">//!&lt; The type of the elements</span>
<a name="522"><font size=-1>522     </font></a><span class="comment">		</span><span class="keyword">typedef double</span><span class="default">&amp;        <a href="dictionary_M.html#7116">reference</a>;</span>
<a name="523"><font size=-1>523     </font></a><span class="default">		</span><span class="keyword">typedef const double</span><span class="default">&amp;  <a href="dictionary_M.html#7117">const_reference</a>;</span>
<a name="524"><font size=-1>524     </font></a><span class="default">		</span><span class="keyword">typedef </span><span class="default">std::<a href="dictionary_S.html#684">size_t</a>    <a href="dictionary_M.html#7118">size_type</a>;</span>
<a name="525"><font size=-1>525     </font></a><span class="default">		</span><span class="keyword">typedef </span><span class="default">std::<a href="dictionary_S.html#686">ptrdiff_t</a> <a href="dictionary_M.html#7119">difference_type</a>;</span>
<a name="526"><font size=-1>526     </font></a><span class="default"></span>
<a name="527"><font size=-1>527     </font></a><span class="default"></span>
<a name="528"><font size=-1>528     </font></a><span class="default">		</span><span class="comment">// size is constant</span>
<a name="529"><font size=-1>529     </font></a><span class="comment">		</span><span class="keyword">enum </span><span class="default">{ static_size = </span><span class="number">6 </span><span class="default">};</span>
<a name="530"><font size=-1>530     </font></a><span class="default">		</span><span class="keyword">static inline <a href="dictionary_M.html#7118">size_type</a> <a href="dictionary_M.html#7122">size</a></span><span class="default">() { </span><span class="keyword">return </span><span class="default">static_size; }</span>
<a name="531"><font size=-1>531     </font></a><span class="default">		</span><span class="keyword">static inline bool <a href="dictionary_M.html#7123">empty</a></span><span class="default">() { </span><span class="keyword">return false</span><span class="default">; }</span>
<a name="532"><font size=-1>532     </font></a><span class="default">		</span><span class="keyword">static inline <a href="dictionary_M.html#7118">size_type</a> <a href="dictionary_M.html#7124">max_size</a></span><span class="default">() { </span><span class="keyword">return </span><span class="default">static_size; }</span>
<a name="533"><font size=-1>533     </font></a><span class="default">		</span><span class="keyword">static inline void <a href="dictionary_M.html#7125">resize</a></span><span class="default">(</span><span class="keyword">const <a href="dictionary_S.html#56">size_t</a> <a href="dictionary_N.html#7126">n</a></span><span class="default">) { </span><span class="keyword">if </span><span class="default">(<a href="dictionary_N.html#7126">n</a>!=static_size) </span><span class="keyword">throw </span><span class="default">std::<a href="dictionary_S.html#150">logic_error</a>(<a href="dictionary_M.html#148">format</a>(</span><span class="string">&quot;Try to change the size of CPose3D to %u.&quot;</span><span class="default">,</span><span class="keyword">static_cast</span><span class="default">&lt;</span><span class="keyword">unsigned</span><span class="default">&gt;(<a href="dictionary_N.html#7126">n</a>))); }</span>
<a name="534"><font size=-1>534     </font></a><span class="default">		</span><span class="comment">/** @} */</span>
<a name="535"><font size=-1>535     </font></a><span class="comment"></span>
<a name="536"><font size=-1>536     </font></a><span class="comment">	</span><span class="default">}; </span><span class="comment">// End of class def.</span>
<a name="537"><font size=-1>537     </font></a><span class="comment">	<a href="dictionary_D.html#746">DEFINE_SERIALIZABLE_POST</a></span><span class="default">( <a href="dictionary_M.html#182">CPose3D</a> )</span>
<a name="538"><font size=-1>538     </font></a><span class="default"></span>
<a name="539"><font size=-1>539     </font></a><span class="default"></span>
<a name="540"><font size=-1>540     </font></a><span class="default">	std::<a href="dictionary_S.html#41">ostream</a> <a href="dictionary_B.html#113">BASE_IMPEXP</a>  &amp; </span><span class="keyword">operator </span><span class="default">&lt;&lt; (std::<a href="dictionary_S.html#41">ostream</a>&amp; o, </span><span class="keyword">const <a href="dictionary_M.html#182">CPose3D</a></span><span class="default">&amp; p);</span>
<a name="541"><font size=-1>541     </font></a><span class="default"></span>
<a name="542"><font size=-1>542     </font></a><span class="default">	</span><span class="comment">/** Unary - operator: return the inverse pose &quot;-p&quot; (Note that is NOT the same than a pose with negative x y z yaw pitch roll) */</span>
<a name="543"><font size=-1>543     </font></a><span class="comment">	<a href="dictionary_M.html#182">CPose3D</a> <a href="dictionary_B.html#113">BASE_IMPEXP</a> </span><span class="keyword">operator </span><span class="default">-(</span><span class="keyword">const <a href="dictionary_M.html#182">CPose3D</a> </span><span class="default">&amp;p);</span>
<a name="544"><font size=-1>544     </font></a><span class="default"></span>
<a name="545"><font size=-1>545     </font></a><span class="default">	</span><span class="keyword">bool <a href="dictionary_B.html#113">BASE_IMPEXP</a> operator</span><span class="default">==(</span><span class="keyword">const <a href="dictionary_M.html#182">CPose3D</a> </span><span class="default">&amp;p1,</span><span class="keyword">const <a href="dictionary_M.html#182">CPose3D</a> </span><span class="default">&amp;p2);</span>
<a name="546"><font size=-1>546     </font></a><span class="default">	</span><span class="keyword">bool <a href="dictionary_B.html#113">BASE_IMPEXP</a> operator</span><span class="default">!=(</span><span class="keyword">const <a href="dictionary_M.html#182">CPose3D</a> </span><span class="default">&amp;p1,</span><span class="keyword">const <a href="dictionary_M.html#182">CPose3D</a> </span><span class="default">&amp;p2);</span>
<a name="547"><font size=-1>547     </font></a><span class="default"></span>
<a name="548"><font size=-1>548     </font></a><span class="default"></span>
<a name="549"><font size=-1>549     </font></a><span class="default">	} </span><span class="comment">// End of namespace</span>
<a name="550"><font size=-1>550     </font></a><span class="comment"></span><span class="default">} </span><span class="comment">// End of namespace</span>
<a name="551"><font size=-1>551     </font></a><span class="comment"></span>
<a name="552"><font size=-1>552     </font></a><span class="comment"></span><span class="preproc">#endif</span>
<a name="553"><font size=-1>553     </font></a><span class="preproc"></span>
</pre></body></html>
